<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upgrade Canva Pro - Penawaran Spesial!</title>
    <link rel="icon" type="image/svg+xml" href="https://public.canva.site/logo/media/dfb96cc174513093cd6ed61489ccb750.svg">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode/1.5.1/qrcode.min.js"></script>

    <!-- === KODE FACEBOOK PIXEL DIMULAI DI SINI === -->
    <script>
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', '801064838407434');
      fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=801064838407434&ev=PageView&noscript=1"
    /></noscript>
    <!-- === AKHIR DARI KODE FACEBOOK PIXEL === -->

    <style>
        /* === Enhanced Professional Color Palette === */
        :root {
            --canva-purple: #8C30F5;
            --canva-purple-dark: #7A1CAC;
            --canva-purple-light: #A855F7;
            --canva-teal: #06B6D4;
            --canva-teal-dark: #0891B2;
            --canva-dark-text: #1E293B;
            --canva-light-text: #64748B;
            --canva-muted-text: #94A3B8;
            --canva-bg-start: #FEFCFF;
            --canva-bg-end: #F8FAFC;
            --canva-card-bg: #FFFFFF;
            --canva-border: #E2E8F0;
            --canva-border-light: #F1F5F9;
            --success-color: #10B981;
            --warning-color: #F59E0B;
            --error-color: #EF4444;
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
        }

        /* === Enhanced Typography & Base Styles === */
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, var(--canva-bg-start) 0%, var(--canva-bg-end) 100%);
            color: var(--canva-dark-text);
            line-height: 1.6;
            font-weight: 400;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        .text-gradient {
            background: linear-gradient(135deg, var(--canva-purple), var(--canva-teal));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 700;
        }

        /* === Enhanced Form Styling === */
        .form-input {
            border: 2px solid var(--canva-border);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 12px;
            padding: 1rem 1.25rem;
            width: 100%;
            background-color: var(--canva-card-bg);
            color: var(--canva-dark-text);
            font-size: 0.95rem;
            font-weight: 500;
            box-shadow: var(--shadow-sm);
        }
        .form-input:focus {
            border-color: var(--canva-purple);
            background-color: var(--canva-card-bg);
            outline: none;
            box-shadow: 0 0 0 3px rgba(140, 48, 245, 0.1), var(--shadow-md);
            transform: translateY(-1px);
        }
        .form-input::placeholder {
            color: var(--canva-muted-text);
            font-weight: 400;
        }
        
        /* === Enhanced CTA Button === */
        .cta-button {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 12px;
            padding: 1rem 2.5rem;
            font-size: 1.05rem;
            font-weight: 700;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            cursor: pointer;
            width: 100%;
            border: none;
            background: linear-gradient(135deg, var(--canva-purple) 0%, var(--canva-purple-dark) 100%);
            color: white;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }
        .cta-button:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }
        .cta-button:hover:before {
            left: 100%;
        }
        .cta-button:hover {
            background: linear-gradient(135deg, var(--canva-purple-dark) 0%, var(--canva-purple) 100%);
            box-shadow: var(--shadow-xl);
            transform: translateY(-2px);
        }
        .cta-button:active {
            transform: translateY(0);
            box-shadow: var(--shadow-md);
        }
        .cta-button:disabled {
            background: linear-gradient(135deg, #9CA3AF 0%, #6B7280 100%);
            cursor: not-allowed;
            transform: none;
            box-shadow: var(--shadow-sm);
        }

        /* === Enhanced Modal Styling === */
        .modal {
            display: none; 
            position: fixed; 
            z-index: 1000; 
            left: 0; 
            top: 0; 
            width: 100%; 
            height: 100%;
            overflow: hidden; 
            background-color: rgba(30, 41, 59, 0.75); 
            backdrop-filter: blur(8px);
            animation: fadeInModal 0.3s ease;
        }
        @keyframes fadeInModal {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        #infoModal {
            justify-content: center; 
            align-items: center;
        }
        .modal-content {
            background-color: var(--canva-card-bg); 
            margin: auto; 
            padding: 2rem 2.5rem; 
            width: 90%; 
            max-width: 480px;
            border-radius: 20px; 
            box-shadow: var(--shadow-xl); 
            text-align: center; 
            position: relative;
            animation: slideInModal 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        @keyframes slideInModal { 
            from { opacity: 0; transform: scale(0.8) translateY(20px); } 
            to { opacity: 1; transform: scale(1) translateY(0); } 
        }
        .modal-content h3 { 
            color: var(--canva-dark-text); 
            margin-bottom: 1rem; 
            font-size: 1.5rem; 
            font-weight: 700; 
        }
        .modal-content p { 
            color: var(--canva-light-text); 
            margin-bottom: 1.5rem; 
            line-height: 1.6; 
            font-size: 0.95rem;
        }
        .modal-ok-button {
            background: linear-gradient(135deg, var(--canva-purple) 0%, var(--canva-purple-dark) 100%);
            color: white; 
            padding: 0.75rem 2rem; 
            border: none; 
            border-radius: 10px;
            cursor: pointer; 
            font-size: 1rem; 
            font-weight: 600; 
            transition: all 0.3s ease;
            box-shadow: var(--shadow-md);
        }
        .modal-ok-button:hover { 
            background: linear-gradient(135deg, var(--canva-purple-dark) 0%, var(--canva-purple) 100%);
            transform: translateY(-1px);
            box-shadow: var(--shadow-lg);
        }

        /* === Enhanced Card Styling === */
        .professional-card {
            background: var(--canva-card-bg);
            border-radius: 20px;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--canva-border-light);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        .professional-card:hover {
            box-shadow: var(--shadow-xl);
            transform: translateY(-2px);
        }
        .professional-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--canva-purple), var(--canva-teal));
        }

        /* === Enhanced Security Header === */
        .security-header {
            background: linear-gradient(135deg, #F8FAFC 0%, #F1F5F9 100%);
            border: 1px solid var(--canva-border);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }
        .security-item {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            padding: 0.75rem;
            background: var(--canva-card-bg);
            border-radius: 12px;
            box-shadow: var(--shadow-sm);
            transition: all 0.3s ease;
        }
        .security-item:hover {
            box-shadow: var(--shadow-md);
            transform: translateY(-1px);
        }
        .security-item i {
            font-size: 1.25rem;
        }
        .security-item h3 {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--canva-dark-text);
            margin: 0;
        }

        /* === Enhanced Segmented Control === */
        .segmented-control {
            display: flex; 
            position: relative; 
            background: linear-gradient(135deg, #F1F5F9 0%, #E2E8F0 100%);
            border-radius: 12px; 
            padding: 4px; 
            width: 100%;
            box-shadow: inset var(--shadow-sm);
        }
        .segmented-control .package-radio {
            position: absolute; 
            opacity: 0; 
            width: 0; 
            height: 0;
        }
        .segmented-control .package-label {
            flex: 1; 
            text-align: center; 
            padding: 0.875rem 0.5rem; 
            cursor: pointer;
            z-index: 2; 
            transition: all 0.3s ease; 
            color: var(--canva-light-text);
            font-size: 0.875rem; 
            font-weight: 600; 
            line-height: 1.2; 
            position: relative;
            border-radius: 8px;
        }
        .segmented-control .package-radio:checked + .package-label {
            color: #fff;
            text-shadow: 0 1px 2px rgba(0,0,0,0.1);
        }
        .segmented-control-pill {
            position: absolute; 
            top: 4px; 
            bottom: 4px;
            width: calc((100% - 8px) / 4);
            background: linear-gradient(135deg, var(--canva-purple) 0%, var(--canva-purple-dark) 100%);
            border-radius: 8px;
            box-shadow: var(--shadow-md);
            z-index: 1; 
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .segmented-control .package-radio#pkg-1m:checked ~ .segmented-control-pill { transform: translateX(0%); }
        .segmented-control .package-radio#pkg-6m:checked ~ .segmented-control-pill { transform: translateX(100%); }
        .segmented-control .package-radio#pkg-1y:checked ~ .segmented-control-pill { transform: translateX(200%); }
        .segmented-control .package-radio#pkg-life:checked ~ .segmented-control-pill { transform: translateX(300%); }

        /* === Enhanced Product Info Card === */
        .product-info-card {
            background: linear-gradient(135deg, #FEFCFF 0%, #F8FAFC 100%);
            border: 2px solid var(--canva-border-light); 
            border-radius: 20px; 
            padding: 2rem;
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
        }
        .product-info-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--canva-purple), var(--canva-teal));
        }

        /* === Enhanced Features Section === */
        .features-container {
            background: linear-gradient(135deg, #F4F3FF 0%, #F0F9FF 100%);
            border: 1px solid var(--canva-border-light);
            border-radius: 20px;
            padding: 2rem;
            box-shadow: var(--shadow-sm);
        }
        .feature-item {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 0.75rem 0;
            transition: all 0.3s ease;
            border-radius: 12px;
            margin: 0 -0.5rem;
            padding-left: 0.5rem;
            padding-right: 0.5rem;
        }
        .feature-item:hover {
            background: rgba(255, 255, 255, 0.5);
            transform: translateX(4px);
        }
        .feature-icon {
            font-size: 1.25rem;
            margin-top: 0.125rem;
            flex-shrink: 0;
        }

        /* === Enhanced Payment Methods === */
        .payment-group {
            border: 2px solid var(--canva-border);
            border-radius: 16px;
            overflow: hidden;
            box-shadow: var(--shadow-sm);
        }
        .payment-radio {
            position: absolute; 
            opacity: 0; 
            width: 0; 
            height: 0;
        }
        .payment-label {
            display: flex; 
            align-items: center; 
            padding: 1rem;
            transition: all 0.3s ease; 
            cursor: pointer;
            background: var(--canva-card-bg);
        }
        .payment-label:hover { 
            background: linear-gradient(135deg, #F8FAFC 0%, #F1F5F9 100%);
        }
        .payment-radio:checked + .payment-label { 
            background: linear-gradient(135deg, #F4F3FF 0%, #EEF2FF 100%);
            border-left: 4px solid var(--canva-purple);
        }
        .payment-logo-container {
            width: 80px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: white;
            border-radius: 8px;
            padding: 6px;
            margin-right: 1rem;
            border: 1px solid var(--canva-border-light);
            flex-shrink: 0;
            box-shadow: var(--shadow-sm);
        }
        .payment-logo {
            max-height: 100%;
            max-width: 100%;
            object-fit: contain;
        }
        .custom-radio-button {
            height: 24px; 
            width: 24px; 
            border: 2px solid var(--canva-border); 
            border-radius: 50%;
            display: flex; 
            align-items: center; 
            justify-content: center;
            transition: all 0.3s ease; 
            flex-shrink: 0; 
            margin-left: 1rem;
            box-shadow: var(--shadow-sm);
        }
        .custom-radio-button .dot {
            height: 12px; 
            width: 12px; 
            border-radius: 50%; 
            background-color: transparent;
            transition: all 0.3s ease;
        }
        .payment-radio:checked + .payment-label .custom-radio-button {
            border-color: var(--canva-purple);
            background: linear-gradient(135deg, var(--canva-purple) 0%, var(--canva-purple-dark) 100%);
            box-shadow: 0 0 0 3px rgba(140, 48, 245, 0.2);
        }
        .payment-radio:checked + .payment-label .custom-radio-button .dot {
            background-color: white;
        }

        /* === Enhanced Order Details === */
        .order-summary {
            background: linear-gradient(135deg, #F8FAFC 0%, #F1F5F9 100%);
            border: 1px solid var(--canva-border);
            border-radius: 16px;
            padding: 1.5rem;
            margin-top: 2rem;
            box-shadow: var(--shadow-sm);
        }
        .order-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--canva-border-light);
        }
        .order-item:last-child {
            border-bottom: none;
            font-weight: 700;
            font-size: 1.125rem;
            color: var(--canva-dark-text);
        }

        /* === Enhanced Testimonial Grid === */
        .testimonial-image {
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            cursor: pointer;
            border-radius: 12px;
            width: 100%;
            height: auto;
            object-fit: cover;
            aspect-ratio: 3 / 4;
            box-shadow: var(--shadow-md);
            border: 2px solid var(--canva-border-light);
        }
        .testimonial-image:hover {
            transform: scale(1.05) rotate(1deg);
            box-shadow: var(--shadow-xl);
            border-color: var(--canva-purple);
        }

        /* === Enhanced FAQ Styling === */
        .faq-item { 
            border-bottom: 1px solid var(--canva-border);
            transition: all 0.3s ease;
        }
        .faq-item:last-child { 
            border-bottom: none; 
        }
        .faq-item summary {
            font-weight: 600; 
            font-size: 1rem; 
            color: var(--canva-dark-text);
            padding: 1.5rem 1rem; 
            cursor: pointer; 
            list-style: none;
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            transition: all 0.3s ease;
            border-radius: 12px;
            margin: 0 -1rem;
        }
        .faq-item summary:hover {
            background: linear-gradient(135deg, #F8FAFC 0%, #F1F5F9 100%);
        }
        .faq-item summary::-webkit-details-marker { 
            display: none; 
        }
        .faq-item summary::after {
            content: '\f078';
            font-family: 'Font Awesome 6 Free'; 
            font-weight: 900;
            transition: transform 0.3s ease; 
            color: var(--canva-purple);
            background: linear-gradient(135deg, #F4F3FF 0%, #EEF2FF 100%);
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.875rem;
        }
        .faq-item[open] summary::after { 
            transform: rotate(180deg); 
        }
        .faq-content { 
            padding: 0 1rem 1.5rem 1rem; 
            color: var(--canva-light-text); 
            line-height: 1.7;
            font-size: 0.95rem;
        }
        .faq-item[open] summary { 
            color: var(--canva-purple); 
        }

        /* === Enhanced Notification === */
        .notif-box {
            position: fixed; 
            top: 24px; 
            left: 50%; 
            transform: translateX(-50%); 
            background: linear-gradient(135deg, var(--canva-dark-text) 0%, #374151 100%);
            color: #ffffff; 
            border-radius: 16px; 
            box-shadow: var(--shadow-xl);
            padding: 1rem 1.5rem; 
            display: none; 
            align-items: center; 
            gap: 1rem; 
            width: auto;
            max-width: 480px; 
            z-index: 1000; 
            opacity: 0;
            transition: all 0.4s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .notif-box.show { 
            display: flex; 
            opacity: 1; 
            animation: slideInAndOut 5s ease-in-out forwards; 
        }
        @keyframes slideInAndOut {
            0%   { opacity: 0; transform: translateX(-50%) translateY(-30px) scale(0.95); }
            10%  { opacity: 1; transform: translateX(-50%) translateY(0) scale(1); }
            90%  { opacity: 1; transform: translateX(-50%) translateY(0) scale(1); }
            100% { opacity: 0; transform: translateX(-50%) translateY(-30px) scale(0.95); }
        }
        .notif-icon-wrapper { 
            color: var(--success-color); 
            font-size: 1.25rem; 
            flex-shrink: 0;
            background: rgba(16, 185, 129, 0.2);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* === Enhanced Typography === */
        h1, h2, h3, h4, h5, h6 {
            font-weight: 700;
            line-height: 1.2;
            color: var(--canva-dark-text);
        }
        
        .section-title {
            font-size: 1.875rem;
            font-weight: 800;
            margin-bottom: 2rem;
            text-align: center;
            position: relative;
        }
        .section-title::after {
            content: '';
            position: absolute;
            bottom: -0.5rem;
            left: 50%;
            transform: translateX(-50%);
            width: 60px;
            height: 3px;
            background: linear-gradient(90deg, var(--canva-purple), var(--canva-teal));
            border-radius: 2px;
        }

        /* === Enhanced Responsive Design === */
        @media (max-width: 768px) {
            .professional-card {
                border-radius: 16px;
                margin: 0 0.5rem;
            }
            .product-info-card,
            .features-container,
            .order-summary {
                padding: 1.5rem;
                border-radius: 16px;
            }
            .cta-button {
                padding: 1rem 2rem;
                font-size: 1rem;
            }
            .section-title {
                font-size: 1.5rem;
            }
        }

        /* === Enhanced Image Modal === */
        #imageModal {
            background-color: rgba(0,0,0,0.9);
        }
        .modal-content-image {
            border-radius: 12px;
            box-shadow: var(--shadow-xl);
        }
        .close-image-modal-button {
            background: linear-gradient(135deg, var(--canva-purple) 0%, var(--canva-purple-dark) 100%);
            color: white;
            border: none;
            padding: 0.75rem 2rem;
            border-radius: 25px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-lg);
        }
        .close-image-modal-button:hover {
            background: linear-gradient(135deg, var(--canva-purple-dark) 0%, var(--canva-purple) 100%);
            transform: translateY(-2px);
            box-shadow: var(--shadow-xl);
        }

        /* === Loading States === */
        .loading {
            position: relative;
            pointer-events: none;
        }
        .loading::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 20px;
            height: 20px;
            margin: -10px 0 0 -10px;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* === Enhanced Payment Instructions === */
        .payment-header {
            background: linear-gradient(135deg, var(--canva-dark-text) 0%, #374151 100%);
            color: #fff;
            text-align: center;
            padding: 1.5rem;
            border-radius: 16px 16px 0 0;
            box-shadow: var(--shadow-md);
        }
        .payment-card {
            background-color: var(--canva-card-bg); 
            border: 1px solid var(--canva-border); 
            border-radius: 16px;
            padding: 2rem; 
            margin-top: 1.5rem;
            box-shadow: var(--shadow-md);
            transition: all 0.3s ease;
        }
        .payment-card:hover {
            box-shadow: var(--shadow-lg);
        }
        .countdown-number {
            background: linear-gradient(135deg, var(--canva-purple) 0%, var(--canva-purple-dark) 100%);
            color: white;
            border-radius: 8px;
            font-weight: 700;
            padding: 0.5rem 0.75rem;
            font-size: 1.125rem;
            box-shadow: var(--shadow-sm);
        }
        .copy-button-text {
            background: none; 
            border: none; 
            color: var(--canva-purple);
            font-weight: 600; 
            cursor: pointer; 
            padding: 0.5rem;
            border-radius: 6px;
            transition: all 0.3s ease;
        }
        .copy-button-text:hover { 
            background: linear-gradient(135deg, #F4F3FF 0%, #EEF2FF 100%);
        }
        .confirm-button-outlined {
            width: 100%; 
            padding: 1rem; 
            border: 2px solid var(--canva-purple);
            color: var(--canva-purple); 
            background-color: transparent; 
            border-radius: 12px;
            font-weight: 600; 
            cursor: pointer; 
            transition: all 0.3s ease;
            font-size: 1rem;
        }
        .confirm-button-outlined:hover { 
            background: linear-gradient(135deg, var(--canva-purple) 0%, var(--canva-purple-dark) 100%);
            color: white;
            box-shadow: var(--shadow-lg);
            transform: translateY(-1px);
        }

        /* === Enhanced Details Modal === */
        .details-modal-content {
            background-color: var(--canva-card-bg); 
            width: 100%; 
            max-width: 100%;
            border-radius: 20px 20px 0 0; 
            box-shadow: var(--shadow-xl);
            text-align: left; 
            transform: translateY(100%);
            border: 1px solid var(--canva-border);
        }
        .details-modal-header {
            padding: 1.5rem 2rem; 
            border-bottom: 1px solid var(--canva-border);
            display: flex; 
            justify-content: space-between; 
            align-items: center;
            background: linear-gradient(135deg, #F8FAFC 0%, #F1F5F9 100%);
            border-radius: 20px 20px 0 0;
        }
        .details-modal-close {
            font-size: 1.5rem; 
            color: var(--canva-light-text);
            cursor: pointer; 
            background: none; 
            border: none;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        .details-modal-close:hover {
            background: rgba(239, 68, 68, 0.1);
            color: var(--error-color);
        }

        /* Add subtle animations */
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .animate-fade-in-up {
            animation: fadeInUp 0.6s ease-out;
        }

        /* Enhanced focus styles for accessibility */
        *:focus {
            outline: 2px solid var(--canva-purple);
            outline-offset: 2px;
        }

        /* Improved button hover states */
        button:not(:disabled):hover {
            cursor: pointer;
        }

        /* Enhanced list styling */
        ul li {
            margin-bottom: 0.75rem;
        }

        /* Professional spacing */
        .space-y-professional > * + * {
            margin-top: 1.5rem;
        }
    </style>
</head>
<body class="antialiased">

    <div id="payment-instruction-container">
        <!-- Konten akan di-generate oleh JavaScript -->
    </div>
    <div class="p-4 sm:p-6 lg:p-8">
        <div id="main-content-container">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-x-16 gap-y-12 max-w-7xl mx-auto">
                <!-- Kolom Kiri: Form & Pembayaran -->
                <div class="lg:col-span-1 professional-card p-8 md:p-10 animate-fade-in-up">
                    <!-- Header Keamanan -->
                    <div class="security-header">
                        <div class="grid grid-cols-2 gap-4">
                            <div class="security-item">
                                <i class="fas fa-shield-alt text-green-500"></i>
                                <h3>TRANSAKSI AMAN</h3>
                            </div>
                            <div class="security-item">
                                <i class="fas fa-hand-holding-usd text-blue-500"></i>
                                <h3>GARANSI UANG KEMBALI</h3>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pemilihan Paket -->
                    <div class="mb-8">
                        <h2 class="text-xl font-bold mb-6 text-gray-800">1. Pilih Paket Anda</h2>
                        <div id="package-selection">
                            <div class="segmented-control">
                                <input type="radio" id="pkg-1m" name="package" value="1m" class="package-radio" checked>
                                <label for="pkg-1m" class="package-label">1 Bulan</label>
    
                                <input type="radio" id="pkg-6m" name="package" value="6m" class="package-radio">
                                <label for="pkg-6m" class="package-label">6 Bulan</label>
    
                                <input type="radio" id="pkg-1y" name="package" value="1y" class="package-radio">
                                <label for="pkg-1y" class="package-label">1 Tahun</label>
                                
                                <input type="radio" id="pkg-life" name="package" value="life" class="package-radio">
                                <label for="pkg-life" class="package-label">Lifetime</label>
    
                                <div class="segmented-control-pill"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Info Produk -->
                    <div id="product-info-form-top" class="mb-8"></div>

                    <!-- Fitur -->
                    <div id="features-before-form" class="mb-8"></div>

                    <!-- Form -->
                    <form id="orderForm" class="space-y-professional">
                        <h2 class="text-xl font-bold mb-6 text-gray-800">2. Lengkapi Data</h2>
                        <div class="space-y-6">
                            <div>
                                <label for="nama" class="block text-sm font-semibold mb-2 text-gray-700">Nama Anda <span class="text-red-500">*</span></label>
                                <input type="text" id="nama" name="nama" class="form-input" placeholder="Masukkan nama lengkap Anda">
                            </div>
                            <div>
                                <label for="whatsapp" class="block text-sm font-semibold mb-2 text-gray-700">No. WhatsApp Anda <span class="text-red-500">*</span></label>
                                <input type="tel" id="whatsapp" name="whatsapp" class="form-input" placeholder="Contoh: 081234567890">
                            </div>
                            <div>
                                <label for="email" class="block text-sm font-semibold mb-2 text-gray-700">Email Canva Anda <span class="text-red-500">*</span></label>
                                <input type="email" id="email" name="email" class="form-input" placeholder="Email yang terdaftar di Canva">
                            </div>
                        </div>
                        
                        <!-- Honeypot field for anti-spam -->
                        <input type="text" name="honeypot" style="display: none" tabindex="-1" autocomplete="off">

                        <!-- Metode Pembayaran -->
                        <div id="payment-method-selection" class="mt-10"></div>
                        
                        <!-- Rincian Pesanan -->
                        <div id="order-details-in-form" class="mt-10"></div>
                        
                        <button type="button" id="submit-btn" class="cta-button mt-10">
                            <i class="fas fa-rocket mr-2"></i>
                            Upgrade Sekarang
                        </button>
                    </form>
                </div>

                <!-- Kolom Kanan: Testimoni, FAQ, Kebijakan -->
                <div class="lg:col-span-1 py-8 space-y-12">
                    <div id="testimonials-container" class="animate-fade-in-up">
                        <h2 class="section-title">Testimoni Pelanggan Kami</h2>
                        <div id="testimonial-grid" class="grid grid-cols-2 sm:grid-cols-4 gap-6">
                            <!-- Gambar akan dimasukkan di sini oleh JavaScript -->
                        </div>
                    </div>
                     <div class="professional-card p-8 md:p-10 animate-fade-in-up">
                         <div id="faq-full"></div>
                     </div>
                     <div class="professional-card p-8 md:p-10 animate-fade-in-up">
                         <div id="policy-full"></div>
                     </div>
                </div>
            </div>
        </div>
        
        <footer id="footer" class="text-center mt-20 text-gray-500 text-sm">
            <div class="max-w-4xl mx-auto border-t border-gray-200 pt-8">
                <p class="font-medium">Copyright © <span id="currentYear">2025</span> Canva Pro ID. Semua Hak Dilindungi.</p>
                <p class="mt-2 text-xs">Layanan upgrade resmi dan terpercaya untuk Canva Pro</p>
            </div>
        </footer>
    </div>

    <!-- Modal for Info/Confirmation -->
    <div id="infoModal" class="modal">
        <div class="modal-content">
            <h3 id="modalTitle"></h3>
            <p id="modalMessage"></p>
            <button class="modal-ok-button" onclick="closeInfoModal()">OK</button>
        </div>
    </div>

    <!-- Modal untuk menampilkan gambar yang diperbesar -->
    <div id="imageModal" class="modal">
        <span class="modal-nav prev" onclick="showPrevImage()">&#10094;</span>
        <span class="modal-nav next" onclick="showNextImage()">&#10095;</span>
        
        <div class="modal-image-wrapper">
            <img class="modal-content-image" id="modalImage">
            <button class="close-image-modal-button" onclick="closeImageModal()">Tutup</button>
        </div>
    </div>
    
    <!-- Modal for Transaction Details -->
    <div id="detailsModal" class="modal">
        <div class="details-modal-content" id="detailsModalContent">
            <!-- Content will be injected by JS -->
        </div>
    </div>

    <!-- Notification Popup -->
    <div class="notif-box" id="notifBox">
        <div class="notif-icon-wrapper"><i class="fas fa-check-circle"></i></div>
        <div class="notif-content-area">
             <div class="notif-message">
                 <div><strong class="notif-name">Nama Acak</strong> baru saja upgrade!</div>
                 <div class="notif-time">beberapa detik lalu</div>
             </div>
        </div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // === ELEMENTS ===
        const elements = {
            mainContentContainer: document.getElementById('main-content-container'),
            paymentInstructionContainer: document.getElementById('payment-instruction-container'),
            footer: document.getElementById('footer'),
            currentYear: document.getElementById('currentYear'),
            productInfoFormTop: document.getElementById('product-info-form-top'),
            featuresBeforeForm: document.getElementById('features-before-form'),
            paymentMethodSelection: document.getElementById('payment-method-selection'),
            orderDetailsInForm: document.getElementById('order-details-in-form'),
            faqFull: document.getElementById('faq-full'),
            policyFull: document.getElementById('policy-full'),
            orderForm: document.getElementById('orderForm'),
            submitBtn: document.getElementById('submit-btn'),
            notifBox: document.getElementById('notifBox'),
            notifName: document.querySelector('#notifBox .notif-name'),
            detailsModal: document.getElementById('detailsModal'),
            detailsModalContent: document.getElementById('detailsModalContent'),
        };

        // === CONFIGURATION ===
        const uniqueCode = Math.floor(Math.random() * (500 - 100 + 1)) + 100;
        let countdownInterval;
        let expiryTime;
        let currentOrderDetails = {};
        
        const packages = {
            '1m': {
                id: '1m',
                name: "Canva Pro 1 Bulan",
                price: 29000,
                title: "UPGRADE CANVA PRO",
                priceDisplay: `Rp29.000`,
                logo: 'https://public.canva.site/logo/media/dfb96cc174513093cd6ed61489ccb750.svg',
                description: "Buka semua fitur desain premium tanpa batas.",
                durationText: "Untuk 1 Bulan",
            },
            '6m': {
                id: '6m',
                name: "Canva Pro 6 Bulan",
                price: 59000,
                title: "UPGRADE CANVA PRO",
                priceDisplay: `Rp59.000`,
                logo: 'https://public.canva.site/logo/media/dfb96cc174513093cd6ed61489ccb750.svg',
                description: "Buka semua fitur desain premium tanpa batas.",
                durationText: "Untuk 6 Bulan",
            },
            '1y': {
                id: '1y',
                name: "Canva Pro 1 Tahun",
                price: 79000,
                title: "UPGRADE CANVA PRO",
                priceDisplay: `Rp79.000`,
                logo: 'https://public.canva.site/logo/media/dfb96cc174513093cd6ed61489ccb750.svg',
                description: "Buka semua fitur desain premium tanpa batas.",
                durationText: "Untuk 1 Tahun",
            },
            life: {
                id: 'life',
                name: "Canva Pro Lifetime",
                price: 99000,
                title: "UPGRADE CANVA PRO",
                priceDisplay: `Rp99.000`,
                logo: 'https://public.canva.site/logo/media/dfb96cc174513093cd6ed61489ccb750.svg',
                description: "Buka semua fitur desain premium tanpa batas.",
                durationText: "Untuk Selamanya",
            }
        };
        
        const allFeatures = [
            "<strong>Fitur Ajaib (Canva AI):</strong> Buat tulisan, gambar, dan presentasi secara otomatis.",
            "<strong>Konten Premium Tanpa Batas:</strong> Akses 100+ juta foto, elemen, video, dan audio premium.",
            "<strong>Penghapus Latar Belakang Cerdas:</strong> Hapus background foto & video dengan sekali klik.",
            "<strong>Ribuan Template Premium:</strong> Akses ribuan template profesional.",
            "<strong>Animasi Instan:</strong> Animasikan grafik dan teks dengan mudah.",
            "<strong>Ubah Ukuran Ajaib:</strong> Ubah ukuran desain ke format apa pun secara instan.",
            "<strong>Penjadwal Konten Media Sosial:</strong> Rencanakan dan jadwalkan postingan ke media sosial.",
            "<strong>Kit Merek Profesional:</strong> Unggah logo, font, dan palet warna merek Anda.",
            "<strong>Penyimpanan Cloud 1 TB:</strong> Simpan semua proyek dengan aman.",
            "<strong>Upgrade Akun Pribadi Anda:</strong> Proses aman, cepat, dan bergaransi pada akun yang sudah ada."
        ];

        let currentPackageId = '1m';

        const paymentAccounts = {
            qris: {
                displayName: 'QRIS',
                accountHolder: 'Epay',
                number: '00020101021126610016ID.CO.SHOPEE.WWW01189360091800223157700208223157700303UMI51440014ID.CO.QRIS.WWW0215ID10254270621910303UMI5204481453033605802ID5904Epay6013JAKARTA PUSAT61051061062070703A0163042F15',
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Logo_QRIS.svg/163px-Logo_QRIS.svg.png',
                type: 'qris',
                category: 'QRIS'
            },
            cimb: {
                displayName: 'Cimb Niaga',
                accountHolder: 'Octo Pay - 6289510639366',
                number: '6289510639366',
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/3/38/CIMB_Niaga_logo.svg/330px-CIMB_Niaga_logo.svg.png',
                type: 'bank',
                category: 'Bank Transfer'
            },
            bca_va: {
                displayName: 'BCA Virtual Account',
                accountHolder: 'Epayment',
                number: '39358089510639366',
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Bank_Central_Asia.svg/330px-Bank_Central_Asia.svg.png',
                type: 'va',
                category: 'Bank Transfer'
            },
            gopay: {
                displayName: 'Gopay',
                accountHolder: 'Gopay 6289510639366',
                number: '089510639366',
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/86/Gopay_logo.svg/320px-Gopay_logo.svg.png',
                type: 'ewallet',
                category: 'E-Wallet'
            },
            dana: {
                displayName: 'DANA',
                accountHolder: 'DNID089510639366',
                number: '089510639366',
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/7/72/Logo_dana_blue.svg/330px-Logo_dana_blue.svg.png',
                type: 'ewallet',
                category: 'E-Wallet'
            },
            ovo: {
                displayName: 'OVO',
                accountHolder: 'OVO Epayment',
                number: '089510639366',
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/eb/Logo_ovo_purple.svg/330px-Logo_ovo_purple.svg.png',
                type: 'ewallet',
                category: 'E-Wallet'
            }
        };

        // === TEMPLATE FUNCTIONS ===
        const getProductInfoHTML = (pkg) => `
        <div class="product-info-card">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between">
                <div class="text-center mb-6 md:mb-0 flex-grow">
                    <div class="flex justify-center mb-4">
                        <img alt="Logo ${pkg.name}" class="h-16 w-auto" src="${pkg.logo}">
                    </div>
                    <h1 class="text-3xl font-extrabold text-gradient mb-2">${pkg.title}</h1>
                    <p class="text-lg text-gray-600 font-medium">${pkg.description}</p>
                </div>
                <div class="text-center md:text-right mt-6 md:mt-0 md:pl-6">
                    <div id="price-display" class="text-5xl font-black mb-2" style="color: var(--canva-purple);">${pkg.priceDisplay}</div>
                    <p id="duration-text" class="text-gray-500 text-lg font-medium">${pkg.durationText}</p>
                    <div class="mt-3 inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-green-100 text-green-800">
                        <i class="fas fa-shield-check mr-1"></i>
                        Bergaransi 100%
                    </div>
                </div>
            </div>
        </div>`;

        const getFeaturesHTML = () => {
            const colors = ['#8C30F5', '#06B6D4', '#F59E0B', '#EF4444', '#10B981', '#8B5CF6'];
            return `<div class="features-container">
                <h3 class="text-xl font-bold mb-6 text-gray-800 text-center">Yang Anda Dapatkan:</h3>
                <ul class="space-y-4">${allFeatures.map((f, index) => `
                    <li class="feature-item">
                        <i class="fas fa-check-circle feature-icon" style="color:${colors[index % colors.length]}"></i>
                        <span class="text-gray-700 font-medium">${f}</span>
                    </li>`).join('')}</ul>
            </div>`;
        }
        
        const getPaymentMethodsHTML = (accounts) => {
            const groupedAccounts = {};
            for (const key in accounts) {
                const account = accounts[key];
                if (!groupedAccounts[account.category]) {
                    groupedAccounts[account.category] = [];
                }
                groupedAccounts[account.category].push({ key, ...account });
            }

            let html = `<h2 class="text-xl font-bold mb-6 text-gray-800">3. Pilih Metode Pembayaran</h2>`;
            const categoryOrder = ['QRIS', 'Bank Transfer', 'E-Wallet'];

            for (const category of categoryOrder) {
                if (groupedAccounts[category]) {
                    html += `<h3 class="text-lg font-semibold text-gray-700 mt-8 mb-4 flex items-center">
                        <i class="fas fa-credit-card mr-2 text-purple-600"></i>
                        ${category}
                    </h3>`;
                    html += `<div class="payment-group">`;

                    groupedAccounts[category].forEach((account, index) => {
                        const isFirst = index === 0 && category === 'QRIS';
                        const isLast = index === groupedAccounts[category].length - 1;
                        
                        html += `
                            <div class="${!isLast ? 'border-b-2 border-gray-100' : ''}">
                                <input type="radio" id="${account.key}" name="payment-method" value="${account.key}" class="payment-radio" ${isFirst ? 'checked' : ''}>
                                <label for="${account.key}" class="payment-label">
                                    <div class="payment-logo-container">
                                        <img src="${account.logo}" alt="Logo ${account.displayName}" class="payment-logo">
                                    </div>
                                    <span class="font-semibold text-gray-800 flex-grow text-lg">${account.displayName}</span>
                                    <span class="custom-radio-button"><span class="dot"></span></span>
                                </label>
                            </div>
                        `;
                    });
                    html += `</div>`;
                }
            }
            return html;
        };

        const getOrderDetailsHTML = (pkg, totalPrice) => `
            <div class="order-summary">
                 <h3 class="text-xl font-bold mb-6 text-gray-800 flex items-center">
                     <i class="fas fa-receipt mr-2 text-purple-600"></i>
                     Rincian Pesanan
                 </h3>
                 <div class="space-y-4">
                      <div class="order-item">
                          <span class="font-medium">${pkg.name}</span>
                          <div class="text-right">
                              <span class="font-semibold text-gray-800 text-lg">${formatCurrency(pkg.price)}</span>
                          </div>
                      </div>
                      <div class="order-item">
                          <span class="font-medium">Kode Unik</span>
                          <span class="font-semibold text-gray-800">${formatCurrency(uniqueCode)}</span>
                      </div>
                      <div class="order-item">
                          <span class="text-xl font-bold">Total</span>
                          <span class="text-2xl font-black" style="color: var(--canva-purple);">${formatCurrency(totalPrice)}</span>
                      </div>
                 </div>
            </div>`;

        const getFaqHTML = () => `
             <div>
                 <h3 class="section-title">Pertanyaan Umum (FAQ)</h3>
                 <div class="space-y-3">
                     <details class="faq-item">
                         <summary>Apakah ini aman dan legal?</summary>
                         <div class="faq-content">Ya, proses upgrade melalui undangan resmi dan sah. Kami tidak akan pernah meminta password akun Anda. Sistem kami menggunakan metode team invitation yang sepenuhnya legal menurut Terms of Service Canva.</div>
                     </details>
                     <details class="faq-item">
                         <summary>Apakah ini sistem tim yang sering berganti?</summary>
                         <div class="faq-content">Tidak, Anda akan diundang ke tim privat yang permanen dan stabil, bukan tim publik yang sering bermasalah. Tim kami telah beroperasi selama bertahun-tahun dengan tingkat kepuasan pelanggan 99%.</div>
                     </details>
                     <details class="faq-item">
                         <summary>Berapa lama prosesnya?</summary>
                         <div class="faq-content">Sangat cepat. Setelah konfirmasi pembayaran, proses aktivasi biasanya hanya beberapa menit, maksimal 1x24 jam. Kami memiliki sistem otomatis yang memproses upgrade secara real-time.</div>
                     </details>
                     <details class="faq-item">
                         <summary>Bisakah digunakan di HP dan Komputer?</summary>
                         <div class="faq-content">Tentu saja. Status Pro akan aktif di semua perangkat (website, aplikasi desktop, dan aplikasi mobile) selama Anda login dengan akun yang sama. Sinkronisasi otomatis di semua platform.</div>
                     </details>
                     <details class="faq-item">
                         <summary>Apakah ini benar-benar seumur hidup?</summary>
                         <div class="faq-content">Ya, untuk paket Lifetime, ini adalah sistem pembayaran sekali untuk selamanya. Anda bisa menikmati fitur Pro selama tim kami masih aktif. Garansi replacement jika terjadi masalah teknis.</div>
                     </details>
                 </div>
             </div>
        `;
        
        const getPolicyHTML = () => `
            <div>
                <h3 class="section-title">Kebijakan & Ketentuan</h3>
                <div class="space-y-8 text-gray-700">
                    <div>
                        <h4 class="text-xl font-bold mb-4 text-gray-800 flex items-center">
                            <i class="fas fa-shield-alt mr-2 text-green-600"></i>
                            Kebijakan Privasi
                        </h4>
                        <p class="leading-relaxed">Informasi email yang Anda berikan hanya digunakan untuk keperluan upgrade (mengirim undangan tim) dan tidak akan pernah dibagikan ke pihak lain. Kami menggunakan enkripsi SSL 256-bit untuk melindungi data Anda dan <strong>tidak pernah</strong> meminta atau menyimpan kata sandi Anda.</p>
                    </div>
                    <div>
                        <h4 class="text-xl font-bold mb-4 text-gray-800 flex items-center">
                            <i class="fas fa-handshake mr-2 text-blue-600"></i>
                            Syarat & Ketentuan
                        </h4>
                         <p class="leading-relaxed">Garansi penuh diberikan jika proses upgrade gagal dari sisi kami. Garansi tidak mencakup pemblokiran akun akibat pelanggaran kebijakan Canva oleh pengguna (misalnya, membuat konten ilegal). Perubahan kebijakan dari pihak Canva di masa depan berada di luar kendali kami. Kami berkomitmen memberikan layanan terbaik dengan dukungan customer service 24/7.</p>
                    </div>
                    <div class="bg-gradient-to-r from-purple-50 to-blue-50 p-6 rounded-xl border border-purple-200">
                        <h4 class="text-lg font-bold mb-3 text-purple-800 flex items-center">
                            <i class="fas fa-award mr-2"></i>
                            Jaminan Kualitas
                        </h4>
                        <ul class="space-y-2 text-purple-700">
                            <li class="flex items-center"><i class="fas fa-check mr-2 text-green-500"></i>Garansi uang kembali 100%</li>
                            <li class="flex items-center"><i class="fas fa-check mr-2 text-green-500"></i>Support 24/7 via WhatsApp</li>
                            <li class="flex items-center"><i class="fas fa-check mr-2 text-green-500"></i>Proses upgrade instan</li>
                            <li class="flex items-center"><i class="fas fa-check mr-2 text-green-500"></i>Ribuan pelanggan puas</li>
                        </ul>
                    </div>
                </div>
            </div>
        `;

        // === FUNCTIONS ===
        function formatCurrency(value) {
            return `Rp${value.toLocaleString('id-ID', { minimumFractionDigits: 0 })}`;
        }

        function getIndonesianTimezone() {
            const offset = new Date().getTimezoneOffset() / -60;
            if (offset === 7) return 'WIB';
            if (offset === 8) return 'WITA';
            if (offset === 9) return 'WIT';
            const sign = offset > 0 ? '+' : '-';
            const hours = Math.abs(Math.floor(offset));
            return `GMT${sign}${String(hours).padStart(2, '0')}:00`;
        }

        function initializeStaticContent() {
            const initialPkg = packages[currentPackageId];
            elements.productInfoFormTop.innerHTML = getProductInfoHTML(initialPkg);
            elements.featuresBeforeForm.innerHTML = getFeaturesHTML();
            elements.faqFull.innerHTML = getFaqHTML();
            elements.policyFull.innerHTML = getPolicyHTML();
            elements.paymentMethodSelection.innerHTML = getPaymentMethodsHTML(paymentAccounts);
            populateTestimonialGrid();
        }
        
        function updateDynamicContent() {
            const pkg = packages[currentPackageId];
            const totalPrice = pkg.price + uniqueCode;

            // Update price and duration text
            const priceDisplayEl = document.getElementById('price-display');
            const durationTextEl = document.getElementById('duration-text');
            if(priceDisplayEl) priceDisplayEl.textContent = pkg.priceDisplay;
            if(durationTextEl) durationTextEl.textContent = pkg.durationText;

            // Update order details in form
            elements.orderDetailsInForm.innerHTML = getOrderDetailsHTML(pkg, totalPrice);
        }

        function generateWaLink(formData, pkg, totalPrice, paymentMethodName, paymentId) {
            const pesanWA = `Halo, saya ingin konfirmasi pembayaran untuk pesanan:\n\n` +
                          `*ID Pembayaran:* ${paymentId}\n` +
                          `*Paket:* ${pkg.name}\n` +
                          `*Metode Pembayaran:* ${paymentMethodName}\n` +
                          `*Nama:* ${formData.get('nama')}\n` +
                          `*No. WhatsApp:* ${formData.get('whatsapp')}\n` +
                          `*Email Canva:* ${formData.get('email')}\n` +
                          `*Total Transfer:* ${formatCurrency(totalPrice)}\n\n` +
                          `Saya sudah melakukan transfer. Mohon untuk segera diproses. Terima kasih.`;
            return `https://wa.me/6285602152097?text=${encodeURIComponent(pesanWA)}`;
        }

        function showPaymentInstructions(formData, pkg, totalPrice, paymentAccount, paymentId, paymentMethodKey) {
            window.scrollTo(0, 0);
            
            currentOrderDetails = {
                pkg, totalPrice, paymentId,
                nama: formData.get('nama'),
                whatsapp: formData.get('whatsapp')
            };

            elements.mainContentContainer.parentElement.style.display = 'none';
            elements.footer.style.display = 'none';
            
            const waLink = generateWaLink(formData, pkg, totalPrice, paymentAccount.displayName, paymentId);
            
            let accountLabel = paymentAccount.type === 'va' ? 'Nomor Virtual Account' : 'Nomor Rekening';
            let instructionAccordionHTML = '';
            let paymentDetailsBlock = '';
            let paymentDeadlineFormatted = '';

            expiryTime = new Date(new Date().getTime() + 24 * 60 * 60 * 1000);
            
            const dateOptions = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const datePart = expiryTime.toLocaleDateString('id-ID', dateOptions);
            const timeOptions = { hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
            const timePart = expiryTime.toLocaleTimeString('id-ID', timeOptions).replace(/\./g, ':');
            const timezoneString = `(${getIndonesianTimezone()})`;
            paymentDeadlineFormatted = `${datePart} pukul ${timePart} ${timezoneString}`;

            if (paymentMethodKey === 'qris') {
                paymentDetailsBlock = `
                    <div class="text-center">
                        <div id="qrcodeContainer" class="bg-white p-4 rounded-xl border-2 border-gray-200 w-full max-w-[280px] h-auto mx-auto my-6 shadow-lg">
                            <div id="qrcode" class="flex justify-center items-center"></div>
                        </div>
                        <button id="downloadQrisButton" class="cta-button max-w-xs mx-auto">
                            <i class="fas fa-download mr-2"></i>
                            Unduh QRIS
                        </button>
                        <p class="text-center text-sm text-gray-600 mt-4 font-medium">Pindai QR Code di atas menggunakan aplikasi perbankan atau e-wallet Anda.</p>
                    </div>
                `;
            } else {
                 paymentDetailsBlock = `
                    <div class="mt-6">
                        <p class="text-sm text-gray-500 font-medium mb-2">${accountLabel}</p>
                        <div class="flex justify-between items-center bg-gray-50 p-4 rounded-lg">
                            <p class="text-xl font-bold text-gray-800 tracking-wider font-mono">${paymentAccount.number}</p>
                            <button onclick="copyToClipboard('${paymentAccount.number}', '${accountLabel}')" class="copy-button-text">
                                <i class="far fa-copy mr-1"></i>Salin
                            </button>
                        </div>
                    </div>
                `;
            }
            
            instructionAccordionHTML = `
                <details class="payment-accordion">
                    <summary>Instruksi Umum</summary>
                    <div class="payment-accordion-content">
                        <ol class="space-y-3">
                            <li><strong>Buka aplikasi</strong> perbankan atau e-wallet Anda.</li>
                            <li><strong>Pilih menu</strong> transfer atau pembayaran.</li>
                            <li><strong>Masukkan detail</strong> pembayaran yang tertera di atas.</li>
                            <li><strong>Pastikan nominal</strong> transfer sesuai dengan total pembayaran hingga digit terakhir.</li>
                            <li><strong>Selesaikan transaksi</strong> dan simpan bukti pembayaran Anda.</li>
                            <li><strong>Konfirmasi pembayaran</strong> melalui WhatsApp untuk proses yang lebih cepat.</li>
                        </ol>
                    </div>
                </details>
            `;

            const paymentViewHTML = `
                <div class="payment-header">
                    <h2 class="text-xl font-bold">Selesaikan Pembayaran</h2>
                    <div class="countdown-timer" id="countdown-timer-display"></div>
                </div>
                <div class="max-w-lg mx-auto payment-page-content">
                    <div class="p-6">
                        <div class="payment-card">
                            <h3 class="font-bold text-xl mb-4 flex items-center">
                                <i class="fas fa-receipt mr-2 text-purple-600"></i>
                                Ringkasan Transaksi
                            </h3>
                            <div class="flex justify-between items-center mt-3 text-sm text-gray-600">
                                <span class="font-medium">Nomor Invoice: ${paymentId}</span>
                                <a href="#" onclick="showDetailsModal(event)" class="font-bold text-purple-600 hover:text-purple-800">Lihat detail</a>
                            </div>
                            <hr class="my-6 border-gray-200">
                            <p class="text-sm text-gray-600 font-medium mb-2">Total Pembayaran</p>
                            <div class="flex items-center justify-between">
                                <p class="text-3xl font-black text-gray-800">${formatCurrency(totalPrice)}</p>
                                <button onclick="copyToClipboard('${totalPrice}', 'Total Pembayaran')" class="copy-button-text text-lg">
                                    <i class="far fa-copy"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="payment-card">
                            <h3 class="font-bold text-xl mb-4 flex items-center">
                                <i class="fas fa-credit-card mr-2 text-blue-600"></i>
                                Silahkan Bayar ke
                            </h3>
                            <div class="flex justify-between items-start mt-4">
                                <div>
                                    <p class="text-sm text-gray-500 font-medium">${paymentAccount.displayName}</p>
                                    <p class="font-bold text-gray-800 text-lg">${paymentAccount.accountHolder}</p>
                                </div>
                                <img src="${paymentAccount.logo}" alt="Logo ${paymentAccount.displayName}" class="h-10 rounded">
                            </div>
                            ${paymentDetailsBlock}
                            <div class="mt-8 bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                                <p class="text-sm text-yellow-800 font-semibold mb-1">⏰ Bayar Sebelum</p>
                                <p class="font-bold text-yellow-900">${paymentDeadlineFormatted}</p>
                            </div>
                            <a href="${waLink}" target="_blank" class="block mt-6">
                               <button class="confirm-button-outlined">
                                   <i class="fab fa-whatsapp mr-2"></i>
                                   Konfirmasi Pembayaran
                               </button>
                            </a>
                        </div>
                        
                        <div class="payment-card">
                            <h3 class="font-bold text-xl mb-4 flex items-center">
                                <i class="fas fa-info-circle mr-2 text-green-600"></i>
                                Cara Membayar
                            </h3>
                            <div class="mt-4">
                                ${instructionAccordionHTML}
                            </div>
                        </div>
                    </div>
                </div>
            `;
            elements.paymentInstructionContainer.innerHTML = paymentViewHTML;
            startCountdown();

            if (paymentMethodKey === 'qris') {
                setTimeout(() => {
                    const qrcodeEl = document.getElementById('qrcode');
                    if(qrcodeEl) {
                        const qrisStatic = paymentAccount.number;
                        const qrisDinamis = createDynamicQrisString(qrisStatic, { nominal: totalPrice });
                        qrcodeEl.innerHTML = ''; 
                        QRCode.toCanvas(qrisDinamis, {
                            width: 280, margin: 1, errorCorrectionLevel: 'H'
                        }, (err, canvas) => {
                            if (err) { console.error("QR Code generation error:", err); return; }
                            canvas.style.width = "100%";
                            canvas.style.height = "auto";
                            qrcodeEl.appendChild(canvas);
                            
                            document.getElementById('downloadQrisButton').addEventListener('click', () => {
                                const link = document.createElement('a');
                                link.download = `qris-${paymentId}.png`;
                                link.href = canvas.toDataURL("image/png");
                                link.click();
                            });
                        });
                    }
                }, 100);
            }
        }

        async function handleFormSubmit() {
            const formData = new FormData(elements.orderForm);
            const nama = formData.get('nama').trim();
            const whatsapp = formData.get('whatsapp').trim();
            const email = formData.get('email').trim();
            const paymentMethodKey = formData.get('payment-method');

            if (!nama || !whatsapp || !email || !paymentMethodKey) {
                showInfoModal('Data Belum Lengkap', 'Mohon lengkapi semua data yang diperlukan sebelum melanjutkan.');
                return;
            }

            elements.submitBtn.disabled = true;
            elements.submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Memproses...';
            elements.submitBtn.classList.add('loading');

            const pkg = packages[currentPackageId];
            const totalPrice = pkg.price + uniqueCode;
            const paymentAccount = paymentAccounts[paymentMethodKey];
            const now = new Date();
            const paymentId = `INV-CNV-${now.getFullYear()}${String(now.getMonth() + 1).padStart(2, '0')}${String(now.getDate()).padStart(2, '0')}${String(now.getHours()).padStart(2, '0')}${String(now.getMinutes()).padStart(2, '0')}${String(totalPrice).slice(-3)}`;

            // Simulate submission with better UX
            setTimeout(() => {
                elements.submitBtn.disabled = false;
                elements.submitBtn.innerHTML = '<i class="fas fa-rocket mr-2"></i>Upgrade Sekarang';
                elements.submitBtn.classList.remove('loading');
                showPaymentInstructions(formData, pkg, totalPrice, paymentAccount, paymentId, paymentMethodKey);
            }, 1500);
        }
        
        function startCountdown() {
            const countdownElement = document.getElementById('countdown-timer-display');
            if (!countdownElement || !expiryTime) return;

            const interval = setInterval(() => {
                const now = new Date().getTime();
                const distance = expiryTime - now;

                if (distance < 0) {
                    clearInterval(interval);
                    countdownElement.innerHTML = "<span class='text-red-500 font-bold'>⚠️ Waktu Habis</span>";
                    return;
                }

                const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                countdownElement.innerHTML = `
                    <div class="countdown-item">
                        <span class="countdown-number">${String(hours).padStart(2, '0')}</span> Jam
                    </div>
                    <div class="countdown-item">
                        <span class="countdown-number">${String(minutes).padStart(2, '0')}</span> Menit
                    </div>
                    <div class="countdown-item">
                        <span class="countdown-number">${String(seconds).padStart(2, '0')}</span> Detik
                    </div>
                `;
            }, 1000);
        }

        // Rest of the JavaScript code remains the same...
        // (Notification system, testimonial grid, modal functions, etc.)

        const FIRST_NAMES = [ "Budi Santoso", "Ayu", "Rahmat", "Citra Dewi Kusuma", "Bayu Pratama", "Lina", "Wulan", "Adi", "Farhan Syahputra", "Hendra Wijaya", "Nana Puspita Dewi", "Joko", "Mega Sari", "Gilang Pramana Putra", "Sari", "Dedi", "Eka Suryani", "Teguh", "Putri Lestari Ayu", "Andi", "Bagus Wijaya", "Ilham Saputra Nugraha", "Rizal", "Mira Astuti", "Puspita", "Hari", "Tri Saputra", "Cahya Pratama", "Surya Darmawan Putra", "Wahyu Ramadhan", "Agus", "Indra Permana", "Linda", "Fajar Mahendra Saputra", "Yusuf", "Pramono Adi Nugroho", "Sinta Dewi", "Bima Pratama", "Dian", "Hasan Basri", "Nurul Aini", "Arif Budiman", "Feri", "Lukman Hakim", "Rangga", "Rini Anggraini Putri", "Tono", "Hadi Prasetyo", "Elisa Purnama", "Anisa Rahma", "Gunawan", "Melati", "Bagus Prasetyo Ramadhan", "Septi Amelia", "Cindy Amelia", "Windi Saputri", "Galih Pratama", "Evi", "Putra", "Slamet Riyadi", "Latif Hidayat", "Gita Puspita", "Darmawan", "Maya", "Erik Saputra Pratama", "Jani", "Jefri Maulana", "Bella Sari", "Maulana", "Novi Andriana Lestari", "Fajar Nugroho", "Taufik Hidayat", "Prasetyo", "Samsul", "Agung", "Endang", "Indah", "Hana Pertiwi", "Mirna", "Yulia", "Panca", "Niken", "Rio", "Adi Putra Ramadhan", "Ganda", "Wahida", "Robby Saputra", "Halim", "Firman Saputra", "Berlian Putra", "Ari", "Joko Setiawan", "Mustika", "Bahar", "Mega", "Erlangga", "Sofyan", "Doni", "Fatimah", "Dian Purnama Sari", "Rama", "Imam Saputra", "Johan", "Gusman", "Lintang", "Nabila", "Beni", "Purnama", "Murni", "Malik", "Nurlan", "Doni Saputra", "Lastri", "Berlinda", "Rasyid", "Tari", "Nia", "Tirta", "Juli Andriani", "Lutfi", "Suci", "Arman", "Yani", "Citra Ayu", "Harto", "Rangga Pratama", "Febrina", "Indra Gunawan Saputra", "Tomi", "Sutrisno", "Risma", "Jihan Ayu Pratiwi", "Lestari", "Dewi Kusuma", "Fahmi", "Rifki", "Wira", "Putra Wijaya", "Beni Setiawan", "Asep", "Gerry", "Prasetia", "Euis", "Latif", "Pajar", "Rahmat Hidayat", "Rudi", "Tika", "Danu", "Hesti", "Syahrul", "Anwar", "Miranti", "Nuraini", "Nurman", "Eman Kurnia", "Nirmala", "Hari Susanto", "Taufan", "Tono Prabowo", "Bayu Saputra Nugroho", "Darma", "Nurlaila", "Hafid", "Mustofa", "Elok", "Gunarto", "Novi", "Lasman", "Jamaludin", "Andi Wijaya Putra", "Herman", "Mila", "Wibowo", "Prayitno", "Adi Saputra", "Jamal", "Irfan", "Iskandar", "Yudha", "Lutris", "Samsul Hidayat", "Heru", "Bagus", "Rudianto", "Nanda Putri", "Laila Rahma", "Frans", "Hilda", "Cahya", "Rudi Pratama", "Setiawan", "Rangga Saputra", "Puspa", "Doni Prasetyo", "Nurul", "Febri", "Mega Sari Lestari", "Suyatno", "Tomiadi", "Fikri", "Lani", "Intan", "Johan Saputra", "Iwan", "Berliano", "Ilham", "Teddy", "Lani Puspita", "Eka Putri Andayani", "Hani", "Adi Wijaya", "Adit", "Dicky", "Gopal", "Pramono", "Gunadi", "Gilang", "Joko Prayitno Adi", "Mira", "Puspita Sari", "Maulana Hakim", "Putri Ayu Lestari", "Malik Prasetyo", "Toriq", "Joni", "Gilang Pratama", "Bagus Wijaya Putra", "Berlian", "Wandi", "Nurman Saputra", "Fajarudin", "Lutfi Pratama", "Citra", "Nanda", "Laras", "Tuti", "Yani Pratiwi", "Gusman Saputra", "Rangga Putra", "Prasetiawan", "Ismail", "Heri", "Adi Nugroho", "Putri", "Prasetyo Adi", "Dona", "Gani", "Jihan", "Puspita Dewi", "Rizal Maulana", "Mahendra", "Ayu Pratiwi", "Rangga Setiawan", "Lina Sari", "Fani", "Adi Wijaya Putra", "Sari Melati", "Andri", "Bima", "Teguh Santoso Adi", "Fajar", "Wulan Dewi", "Rama Pratama", "Nana", "Farhan", "Dion", "Melati Pertiwi", "Adi Putra", "Joko Santoso", "Doni Setiawan", "Lintang Pertiwi", "Septi", "Gopal Pramana", "Tomi Pratama", "Rio Nugraha", "Cindy", "Hafid Saputra", "Hendra", "Niken Lestari", "Rangga Nugroho", "Putri Ayu", "Sofyan Hidayat", "Robby", "Bima Saputra", "Indra", "Adi Kurniawan", "Nanda Saputra", "Gilang Saputra", "Wahyu", "Puspita Ayu", "Rudi Hartono", "Wulan Dewi Pertiwi", "Ayu Pratiwi Lestari", "Tono Adi", "Dedi Kurniawan", "Prasetyo Ramadhan", "Adi Setiawan", "Mira Lestari", "Farhan Syahputra Adi", "Nurul Hidayah", "Sari Anggraini", "Bayu", "Eman", "Putra Adi Nugroho", "Lestari Ayu", "Bambang", "Rangga Hidayat", "Mega Putri", "Adi Nugraha", "Anisa", "Siska", "Wandi Putra", "Fajar Saputra", "Gunawan Pratama", "Heri Setiawan", "Arif", "Ilham Nugroho", "Bagus Pratama", "Erlangga Putra", "Rian", "Pandu", "Tari Ayu", "Hendro", "Risma Ayu", "Adi Pratama", "Septi Ayu", "Bambang Santoso", "Lukman", "Gani Saputra", "Hasan", "Feri Kurniawan", "Tirta", "Bambang Prasetyo", "Pajar Saputra", "Arman Putra", "Murni Ayu", "Hafiz", "Euis Sari", "Bayu Nugroho", "Tomi Saputra", "Gerry Pratama", "Arif Prasetyo", "Johan Putra", "Hafid Nugraha", "Nabila Pertiwi", "Latif Saputra", "Ari Saputra", "Rio Saputra", "Tono Saputra", "Wandi Saputra", "Mahendra Putra", "Ilham Pratama", "Putri Dewi", "Adi Lestari", "Rangga Maulana", "Bayu Hidayat", "Fani Puspita", "Taufik", "Bagus Saputra", "Novi Puspita", "Rahmat Hidayatullah Putra", "Prayitno Saputra", "Adi Ramadhan", "Bayu Wijaya", "Gilang Nugraha", "Rangga Prasetyo", "Putra Purnama", "Wulan Pertiwi", "Adi Wijaya Ramadhan", "Budi", "Rian Pratama", "Samsul Nugroho", "Wahyu Saputra", "Teguh Prasetyo", "Fikri Nugraha", "Rizki Pratama" ];
        
        function getRandomElement(arr) { return arr[Math.floor(Math.random() * arr.length)]; }
        function generateRandomName() { return `${getRandomElement(FIRST_NAMES)}`; }
        
        function showNextNotification() {
            if (!elements.notifBox || !elements.notifName) return;
            elements.notifName.textContent = generateRandomName();
            elements.notifBox.classList.remove('show');
            void elements.notifBox.offsetWidth;
            elements.notifBox.classList.add('show');
        }

        function scheduleNextNotification() {
            const randomDelay = Math.floor(Math.random() * 10000) + 8000;
            setTimeout(() => {
                showNextNotification();
                scheduleNextNotification();
            }, randomDelay);
        }

        // === TESTIMONIAL GRID ===
        const testimonialImages = [
            "https://placehold.co/600x800/E9D5FF/8C30F5?text=Testimoni+1",
            "https://placehold.co/600x800/C9E9FF/05A3B8?text=Testimoni+2",
            "https://placehold.co/600x800/DBEAFE/8C30F5?text=Testimoni+3",
            "https://placehold.co/600x800/FEF3C7/F59E0B?text=Testimoni+4",
            "https://placehold.co/600x800/E9D5FF/8C30F5?text=Testimoni+5",
            "https://placehold.co/600x800/C9E9FF/05A3B8?text=Testimoni+6",
            "https://placehold.co/600x800/DBEAFE/8C30F5?text=Testimoni+7",
            "https://placehold.co/600x800/FEF3C7/F59E0B?text=Testimoni+8"
        ];
        const imageModal = document.getElementById('imageModal');
        const modalImg = document.getElementById("modalImage");
        const testimonialGrid = document.getElementById('testimonial-grid');
        let currentImageIndex;

        function populateTestimonialGrid() {
            if (!testimonialGrid) return;
            let imagesHTML = testimonialImages.map((url, index) => `
                <img src="${url}" alt="Testimoni Pelanggan ${index + 1}" class="testimonial-image" onclick="openImageModal(event, ${index})">
            `).join('');
            testimonialGrid.innerHTML = imagesHTML;
        }

        function showImage(index) {
            if (index >= testimonialImages.length || index < 0) {
                return;
            }
            currentImageIndex = index;
            modalImg.src = testimonialImages[index];
            document.querySelector('.modal-nav.prev').style.display = (index > 0) ? 'block' : 'none';
            document.querySelector('.modal-nav.next').style.display = (index < testimonialImages.length - 1) ? 'block' : 'none';
        }

        window.openImageModal = function(event, index) {
            event.stopPropagation();
            imageModal.style.display = "flex";
            showImage(index);
        }

        window.closeImageModal = function() {
            imageModal.style.display = "none";
        }

        window.showNextImage = function() {
            showImage(currentImageIndex + 1);
        }
        window.showPrevImage = function() {
            showImage(currentImageIndex - 1);
        }

        window.addEventListener('click', function(event) {
            if (event.target == imageModal) {
                closeImageModal();
            }
        });

        document.addEventListener('keydown', function(event) {
            if (imageModal.style.display === 'flex') {
                if (event.key === 'ArrowRight') {
                    showNextImage();
                } else if (event.key === 'ArrowLeft') {
                    showPrevImage();
                } else if (event.key === 'Escape') {
                    closeImageModal();
                }
            }
        });

        elements.currentYear.textContent = new Date().getFullYear();
        elements.submitBtn.addEventListener('click', handleFormSubmit);

        document.querySelectorAll('input[name="package"]').forEach(radio => {
            radio.addEventListener('change', (event) => {
                currentPackageId = event.target.value;
                updateDynamicContent();
            });
        });

        initializeStaticContent();
        updateDynamicContent();
        
        if (elements.notifBox && elements.notifName) {
            setTimeout(scheduleNextNotification, 6000);
        }
        
        function getDetailsModalHTML(details) {
            const { pkg, totalPrice, paymentId, nama, whatsapp } = details;
            return `
                <div class="details-modal-header">
                    <h3 class="text-lg font-bold">Ringkasan Transaksi</h3>
                    <button class="details-modal-close" onclick="closeDetailsModal()">&times;</button>
                </div>
                <div class="details-modal-body">
                    <p class="text-sm text-gray-500 mb-6">Nomor Invoice: <span class="font-mono font-semibold">${paymentId}</span></p>
                    <div class="text-center mb-8">
                        <p class="text-sm text-gray-600 mb-2">Total Pembayaran</p>
                        <div class="flex items-center justify-center">
                            <p class="text-4xl font-black text-gray-800">${formatCurrency(totalPrice)}</p>
                            <button onclick="copyToClipboard('${totalPrice}', 'Total Pembayaran')" class="copy-button-text text-lg ml-2">
                                <i class="far fa-copy"></i>
                            </button>
                        </div>
                    </div>
                    <div class="space-y-4 border-t border-b border-gray-200 py-6 mb-6">
                        <div>
                            <div class="flex justify-between text-base">
                                <span class="font-medium">${pkg.name}</span>
                                <span class="font-semibold">${formatCurrency(pkg.price)}</span>
                            </div>
                        </div>
                         <div class="flex justify-between text-sm">
                            <span class="text-gray-500">Kode Unik</span>
                            <span class="font-medium">${formatCurrency(uniqueCode)}</span>
                        </div>
                    </div>
                    <div class="space-y-3 mb-8">
                        <div class="flex justify-between text-base">
                            <span class="text-gray-600">Subtotal</span>
                            <span class="font-semibold">${formatCurrency(totalPrice)}</span>
                        </div>
                        <div class="flex justify-between font-bold text-lg">
                            <span>Total Pembayaran</span>
                            <span style="color: var(--canva-purple);">${formatCurrency(totalPrice)}</span>
                        </div>
                    </div>
                    <div class="border-t border-gray-200 pt-6">
                        <h4 class="font-bold mb-4 text-base flex items-center">
                            <i class="fas fa-user mr-2 text-blue-600"></i>
                            Informasi Pelanggan
                        </h4>
                        <div class="grid grid-cols-1 gap-4 text-sm">
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <p class="text-gray-500 mb-1">Nama</p>
                                <p class="font-semibold text-gray-800">${nama}</p>
                            </div>
                            <div class="bg-gray-50 p-4 rounded-lg">
                                <p class="text-gray-500 mb-1">Nomor Telepon</p>
                                <p class="font-semibold text-gray-800">${whatsapp}</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        window.showDetailsModal = function(event) {
            event.preventDefault();
            elements.detailsModalContent.innerHTML = getDetailsModalHTML(currentOrderDetails);
            elements.detailsModal.style.display = 'flex';
            elements.detailsModalContent.classList.remove('is-closing');
            elements.detailsModalContent.classList.add('is-open');
        }

        window.closeDetailsModal = function() {
            elements.detailsModalContent.classList.remove('is-open');
            elements.detailsModalContent.classList.add('is-closing');
            setTimeout(() => {
                elements.detailsModal.style.display = 'none';
            }, 300);
        }
    });

    const infoModal = document.getElementById('infoModal');
    
    function showInfoModal(title, message) {
        if (!infoModal) return;
        infoModal.querySelector('#modalTitle').textContent = title;
        infoModal.querySelector('#modalMessage').textContent = message;
        infoModal.style.display = 'flex';
    }

    function closeInfoModal() {
        if (!infoModal) return;
        infoModal.style.display = 'none';
    }

    window.addEventListener('click', function(event) {
        if (event.target == infoModal) { closeInfoModal(); }
        if (event.target == document.getElementById('detailsModal')) { closeDetailsModal(); }
        if (event.target == document.getElementById('imageModal')) { closeImageModal(); }
    });

    function copyToClipboard(text, entityName) {
        const textArea = document.createElement('textarea');
        textArea.value = text;
        document.body.appendChild(textArea);
        textArea.select();
        try {
            document.execCommand('copy');
            showInfoModal('Berhasil Disalin!', `${entityName} telah disalin ke clipboard.`);
        } catch (err) {
            showInfoModal('Gagal!', 'Gagal menyalin. Silakan coba secara manual.');
        }
        document.body.removeChild(textArea);
    }

    // === QRIS LOGIC FUNCTIONS ===
    function createDynamicQrisString(qris, { nominal }) {
        if (!qris) throw new Error('Parameter "qris" (string QRIS statis) dibutuhkan.');
        if (nominal === undefined) throw new Error('Parameter "nominal" dibutuhkan.');

        let qrisModified = qris.slice(0, -4).replace("010211", "010212");
        const nominalStr = String(Math.round(nominal));
        const amountLength = nominalStr.length < 10 ? "0" + nominalStr.length : nominalStr.length.toString();
        const amountPart = "54" + amountLength + nominalStr;
        
        if (!qrisModified.includes("5802ID")) {
            throw new Error("Format string QRIS tidak dikenali (tidak ditemukan '5802ID').");
        }
        let finalQris = qrisModified.replace("5802ID", amountPart + "5802ID");
        const crc = toCRC16(finalQris);
        return finalQris + crc;
    }

    function toCRC16(input) {
        let crc = 0xFFFF;
        for (let i = 0; i < input.length; i++) {
            crc ^= input.charCodeAt(i) << 8;
            for (let j = 0; j < 8; j++) {
                crc = crc & 0x8000 ? (crc << 1) ^ 0x1021 : crc << 1;
            }
        }
        return (crc & 0xFFFF).toString(16).toUpperCase().padStart(4, '0');
    }
    </script>

</body>
</html>
