<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4000+ Preset Lightroom - Penawaran Spesial!</title>
    <link rel="icon" type="image/png" href="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/Adobe_Photoshop_Lightroom_CC_logo.svg/1200px-Adobe_Photoshop_Lightroom_CC_logo.svg.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

    <!-- === KODE FACEBOOK PIXEL DIMULAI DI SINI === -->
    <script>
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', '630583642253416');
      fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=630583642253416&ev=PageView&noscript=1"
    /></noscript>
    <!-- === AKHIR DARI KODE FACEBOOK PIXEL === -->

    <style>
        /* Pengaturan Dasar dan Font - Tema Logo Lightroom */
        body {
            font-family: 'Inter', 'Roboto', sans-serif;
            background-color: #181c24; /* Latar belakang biru tua dari logo */
            color: #e0e0e0; 
        }

        /* Input Form - Tema Gelap */
        .form-input {
            border: 1px solid #3a404d;
            transition: all 0.2s ease-in-out;
            border-radius: 8px;
            padding: 0.9rem 1rem;
            width: 100%;
            background-color: #20242d;
            color: #e0e0e0;
        }
        .form-input::placeholder {
            color: #777;
        }
        .form-input:focus {
            border-color: #3399ff;
            background-color: #2a2e37;
            outline: none;
            box-shadow: 0 0 0 2px rgba(51, 153, 255, 0.5);
        }
        
        /* Tombol Aksi (CTA) - Tema Lightroom */
        .cta-button {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 8px;
            padding: 0.85rem 2rem;
            font-size: 1rem;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.75rem;
            cursor: pointer;
            width: 100%;
            border: none;
        }
        .light-blue-button {
            background-color: #3399ff; /* Warna biru terang dari logo */
            color: #ffffff; 
        }
        .light-blue-button:hover {
            background-color: #2980b9;
            box-shadow: 0 4px 15px rgba(51, 153, 255, 0.2);
        }
        .cta-button:disabled {
            background-color: #4a5568;
            cursor: not-allowed;
        }

        /* Modal / Message Box Styling - Tema Gelap */
        .modal {
            display: none; position: fixed; z-index: 1000; left: 0; top: 0; width: 100%; height: 100%;
            overflow: auto; background-color: rgba(0,0,0,0.8); justify-content: center; align-items: center;
        }
        .modal-content {
            background-color: #20242d; margin: auto; padding: 24px 32px; width: 90%; max-width: 450px;
            border-radius: 16px; box-shadow: 0 5px 15px rgba(0,0,0,0.5); text-align: center; position: relative;
            animation: fadeIn 0.3s ease;
            border: 1px solid #3a404d;
        }
        .modal-content h3 { color: #ffffff; margin-bottom: 15px; font-size: 1.5rem; font-weight: 700; }
        .modal-content p { color: #b0b0b0; margin-bottom: 20px; line-height: 1.6; }
        .modal-ok-button {
            background-color: #3399ff; color: white; padding: 10px 24px; border: none; border-radius: 8px;
            cursor: pointer; font-size: 1rem; font-weight: 600; transition: background-color 0.2s ease;
        }
        .modal-ok-button:hover { background-color: #2980b9; }

        /* Testimonial Section */
        .testimonial-image {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            cursor: pointer;
            border-radius: 12px;
        }
        .testimonial-image:hover {
            transform: scale(1.05);
            box-shadow: 0 10px 25px rgba(51, 153, 255, 0.2);
        }
        
        /* Modal untuk Zoom Gambar Testimoni */
        #imageModal .modal-content-image {
            margin: auto; display: block; width: auto; max-width: 90%; max-height: 85vh;
            animation: zoomIn 0.3s ease; border-radius: 8px;
        }
        .close-image-modal {
            position: absolute; top: 20px; right: 35px; color: #f1f1f1; font-size: 40px;
            font-weight: bold; transition: 0.3s; cursor: pointer;
        }
        .close-image-modal:hover, .close-image-modal:focus { color: #bbb; text-decoration: none; }
        @keyframes zoomIn { from {transform: scale(0)} to {transform: scale(1)} }
        
        /* Notifikasi Toast */
        .notif-box {
            position: fixed; top: 24px; left: 50%; transform: translateX(-50%); background-color: #20242d;
            color: #ffffff; border-radius: 9999px; box-shadow: 0 4px 12px rgba(0,0,0,0.5);
            padding: 12px 24px; display: none; align-items: center; gap: 12px; width: auto;
            max-width: 450px; z-index: 1000; opacity: 0; border: 1px solid #3a404d;
            transition: opacity 0.4s ease, transform 0.4s ease, top 0.4s ease;
        }
        .notif-box.show { display: flex; opacity: 1; animation: slideInAndOut 5s ease-in-out forwards; }
        @keyframes slideInAndOut {
            0%   { opacity: 0; transform: translateX(-50%) translateY(-30px); }
            10%  { opacity: 1; transform: translateX(-50%) translateY(0); }
            90%  { opacity: 1; transform: translateX(-50%) translateY(0); }
            100% { opacity: 0; transform: translateX(-50%) translateY(-30px); }
        }
        .notif-icon-wrapper { color: #3399ff; font-size: 1.2rem; flex-shrink: 0; }
        .notif-message strong { font-weight: 600; color: #3399ff; }
        .notif-time { font-size: 0.75rem; color: #999; margin-top: 2px; }
        
        @media (max-width: 500px) {
            .notif-box { left: 16px; right: 16px; top: 16px; transform: translateX(0); width: calc(100% - 32px); }
            @keyframes slideInAndOut {
                0%   { opacity: 0; transform: translateY(-20px); } 10%  { opacity: 1; transform: translateY(0); }
                90%  { opacity: 1; transform: translateY(0); } 100% { opacity: 0; transform: translateY(-20px); }
            }
        }

        /* Bagian FAQ */
        .faq-item { border-bottom: 1px solid #3a404d; }
        .faq-item:last-child { border-bottom: none; }
        .faq-item summary {
            font-weight: 600; font-size: 1rem; color: #e0e0e0;
            padding: 1.25rem 0.5rem; cursor: pointer; list-style: none;
            display: flex; justify-content: space-between; align-items: center;
        }
        .faq-item summary::-webkit-details-marker { display: none; }
        .faq-item summary::after {
            content: '\f078'; /* chevron-down */
            font-family: 'Font Awesome 6 Free'; font-weight: 900;
            transition: transform 0.3s ease; color: #888;
        }
        .faq-item[open] summary::after { transform: rotate(180deg); }
        .faq-content { padding: 0 0.5rem 1.25rem 0.5rem; color: #b0b0b0; line-height: 1.7; }
        .faq-item[open] summary { color: #3399ff; }

        /* Metode Pembayaran */
        .payment-radio {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }
        .payment-label {
            display: flex;
            align-items: center;
            padding: 1rem 1rem;
            transition: background-color 0.2s ease-in-out;
            cursor: pointer;
        }
        .payment-label:hover {
            background-color: #2a2e37;
        }
        .payment-radio:checked + .payment-label {
            background-color: #2a2e37;
        }
        .payment-group > div:first-child > .payment-label {
            border-top-left-radius: 0.5rem;
            border-top-right-radius: 0.5rem;
        }
        .payment-group > div:last-child > .payment-label {
            border-bottom-left-radius: 0.5rem;
            border-bottom-right-radius: 0.5rem;
        }
        .payment-logo {
            height: 20px;
            width: auto;
            max-width: 60px;
            object-fit: contain;
            margin-right: 1rem;
            background-color: white; /* Latar belakang putih ditambahkan */
            padding: 3px; /* Padding agar logo tidak menempel */
            border-radius: 4px; /* Sudut membulat */
        }
        .custom-radio-button {
            height: 20px;
            width: 20px;
            border: 2px solid #888;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease-in-out;
            flex-shrink: 0;
            margin-left: 1rem;
        }
        .custom-radio-button .dot {
            height: 10px;
            width: 10px;
            border-radius: 50%;
            background-color: transparent;
            transition: all 0.2s ease-in-out;
        }
        .payment-radio:checked + .payment-label .custom-radio-button {
            border-color: #3399ff;
        }
        .payment-radio:checked + .payment-label .custom-radio-button .dot {
            background-color: #3399ff;
        }
        
        /* Payment Instruction Layout Styles */
        .payment-instruction-card {
            background-color: #20242d;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.25);
            overflow: hidden;
            max-width: 480px;
            margin: 2rem auto;
            border: 1px solid #3a404d;
        }
        .payment-instruction-header {
            background-color: #2a2e37;
            color: #fff;
            padding: 1rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .payment-instruction-body {
            padding: 1.5rem;
        }
        .payment-instruction-footer {
            padding: 1.5rem;
            background-color: #181c24;
            border-top: 1px solid #3a404d;
        }
        .payment-accordion summary {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            padding: 1rem 0;
            cursor: pointer;
            border-bottom: 1px solid #3a404d;
            color: #e0e0e0;
        }
        .payment-accordion summary::after {
            content: '\f078';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            transition: transform 0.3s ease;
        }
        .payment-accordion[open] summary::after {
            transform: rotate(180deg);
        }
        .payment-accordion-content {
            padding: 1rem 0.5rem;
            color: #b0b0b0;
            line-height: 1.6;
        }
        .payment-accordion-content ol {
            list-style-type: decimal;
            padding-left: 1.5rem;
        }
        .copy-button {
            color: #3399ff;
            font-weight: 600;
            background: none;
            border: none;
            cursor: pointer;
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8 max-w-7xl">
        <div id="main-content-container">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-x-16 gap-y-8">
                <!-- Kolom Kiri: Form & Pembayaran -->
                <div class="lg:col-span-1 bg-[#20242d] p-8 md:p-10 rounded-2xl shadow-lg border border-gray-700">
                    <!-- Header Keamanan -->
                    <div class="grid grid-cols-2 gap-4 text-center border-b border-gray-700 pb-6 mb-8">
                        <div class="flex items-center justify-center gap-3">
                            <i class="fas fa-shield-alt text-green-400 text-xl"></i>
                            <h3 class="font-medium text-sm text-gray-400">TRANSAKSI AMAN</h3>
                        </div>
                        <div class="flex items-center justify-center gap-3">
                            <i class="fas fa-hand-holding-usd text-blue-400 text-xl"></i>
                            <h3 class="font-medium text-sm text-gray-400 uppercase">Jaminan Kepuasan</h3>
                        </div>
                    </div>

                    <!-- Info Produk -->
                    <div id="product-info-form-top" class="mb-8"></div>

                    <!-- Fitur -->
                    <div id="features-before-form" class="mb-8 border-t border-gray-700 pt-8"></div>

                    <!-- Form -->
                    <form id="orderForm">
                        <h2 class="text-xl font-bold mb-5 text-white">Lengkapi Data</h2>
                        <div class="space-y-4">
                            <div>
                                <label for="nama" class="block text-sm font-medium mb-1 text-gray-300">Nama Anda <span class="text-red-500">*</span></label>
                                <input type="text" id="nama" name="nama" class="form-input w-full" placeholder="Masukkan nama lengkap Anda">
                            </div>
                            <div>
                                <label for="whatsapp" class="block text-sm font-medium mb-1 text-gray-300">No. WhatsApp Anda <span class="text-red-500">*</span></label>
                                <input type="tel" id="whatsapp" name="whatsapp" class="form-input w-full" placeholder="Contoh: 081234567890">
                            </div>
                            <div>
                                <label for="email" class="block text-sm font-medium mb-1 text-gray-300">Email Anda <span class="text-red-500">*</span></label>
                                <input type="email" id="email" name="email" class="form-input w-full" placeholder="contoh.email@gmail.com">
                            </div>
                        </div>
                        
                        <!-- Honeypot -->
                        <input type="text" name="honeypot" style="display: none" tabindex="-1" autocomplete="off">

                        <!-- Metode Pembayaran -->
                        <div id="payment-method-selection" class="mt-8"></div>

                        <!-- Rincian Pesanan -->
                        <div id="order-details-in-form" class="mt-8"></div>
                        
                        <button type="button" id="submit-btn" class="cta-button light-blue-button mt-8">
                            Beli Sekarang
                        </button>
                    </form>
                </div>

                <!-- Kolom Kanan: Testimoni, FAQ, Kebijakan -->
                <div class="lg:col-span-1 py-8">
                     <div id="testimonials-full"></div>
                     <div class="mt-12 bg-[#20242d] p-8 md:p-10 rounded-2xl shadow-lg border border-gray-700">
                         <div id="faq-full"></div>
                     </div>
                     <div class="mt-12 bg-[#20242d] p-8 md:p-10 rounded-2xl shadow-lg border border-gray-700">
                         <div id="policy-full"></div>
                     </div>
                </div>
            </div>
        </div>
        <div id="payment-instruction-container"></div>
        <footer id="footer" class="text-center mt-16 text-gray-500 text-sm">
            <p>Copyright © <span id="currentYear"></span> Preset Pro. Semua Hak Dilindungi.</p>
        </footer>
    </div>

    <!-- Modal for Info/Confirmation -->
    <div id="infoModal" class="modal">
        <div class="modal-content">
            <h3 id="modalTitle"></h3>
            <p id="modalMessage"></p>
            <button class="modal-ok-button" onclick="closeInfoModal()">OK</button>
        </div>
    </div>

    <!-- Modal untuk Zoom Gambar -->
    <div id="imageModal" class="modal" onclick="closeImageModal()">
        <span class="close-image-modal" onclick="closeImageModal()">&times;</span>
        <img class="modal-content-image" id="modalImage">
    </div>
    
    <!-- Notification Popup -->
    <div class="notif-box" id="notifBox">
        <div class="notif-icon-wrapper"><i class="far fa-check-circle"></i></div>
        <div class="notif-content-area">
             <div class="notif-message">
                 <div><strong class="notif-name">Nama Acak</strong> baru saja membeli!</div>
                 <div class="notif-time">beberapa detik lalu</div>
             </div>
        </div>
    </div>


    <script>
    document.addEventListener('DOMContentLoaded', function() {

        // --- ELEMENTS ---
        const elements = {
            mainContentContainer: document.getElementById('main-content-container'),
            paymentInstructionContainer: document.getElementById('payment-instruction-container'),
            footer: document.getElementById('footer'),
            currentYear: document.getElementById('currentYear'),
            productInfoFormTop: document.getElementById('product-info-form-top'),
            featuresBeforeForm: document.getElementById('features-before-form'),
            paymentMethodSelection: document.getElementById('payment-method-selection'),
            orderDetailsInForm: document.getElementById('order-details-in-form'),
            testimonialsFull: document.getElementById('testimonials-full'),
            faqFull: document.getElementById('faq-full'),
            policyFull: document.getElementById('policy-full'),
            orderForm: document.getElementById('orderForm'),
            submitBtn: document.getElementById('submit-btn'),
            notifBox: document.getElementById('notifBox'),
            notifName: document.querySelector('#notifBox .notif-name'),
        };

        // --- CONFIGURATION ---
        const uniqueCode = Math.floor(Math.random() * (500 - 100 + 1)) + 100;
        let countdownInterval;
        
        const packageInfo = {
            name: "4000+ Preset Lightroom",
            price: 49000,
            title: "4000+ PRESET LIGHTROOM",
            priceDisplay: `Rp49.000`,
            features: [
                "<strong>4000+ Preset Premium:</strong> Siap pakai untuk mengubah foto Anda menjadi karya profesional.",
                "<strong>Untuk Mobile & Desktop:</strong> Kompatibel dengan Lightroom Mobile (Android/iOS) dan Lightroom Classic (PC/Mac).",
                "<strong>Beragam Kategori:</strong> Termasuk preset untuk travel, kuliner, potret, wedding, alam, dan banyak lagi.",
                "<strong>Instalasi Sangat Mudah:</strong> Disertai panduan video langkah demi langkah yang jelas.",
                "<strong>Sekali Bayar Seumur Hidup:</strong> Tidak ada biaya bulanan atau tahunan tersembunyi.",
                "<strong>Update Gratis:</strong> Dapatkan preset baru secara berkala tanpa biaya tambahan.",
                "<strong>Cocok untuk Pemula & Pro:</strong> Ubah foto Anda dengan satu klik, tanpa perlu keahlian editing.",
                "<strong>Dukungan Penuh:</strong> Kami siap membantu jika Anda mengalami kendala saat instalasi."
            ]
        };
        
        const paymentAccounts = {
            bca_va: { 
                displayName: 'BCA Virtual Account', 
                accountHolder: 'Epayment', 
                number: '39358089510639366', 
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Bank_Central_Asia.svg/330px-Bank_Central_Asia.svg.png', 
                type: 'va',
                category: 'Bank Transfer'
            },
            bni_va: { 
                displayName: 'BNI Virtual Account', 
                accountHolder: 'DOKU-Muhammad Rizal Setiawan', 
                number: '988784301171924987', 
                logo: 'https://upload.wikimedia.org/wikipedia/id/thumb/5/55/BNI_logo.svg/320px-BNI_logo.svg.png', 
                type: 'va',
                category: 'Bank Transfer'
            },
            bri_va: { 
                displayName: 'BRI Virtual Account', 
                accountHolder: 'Muhammad Rizal Setiawan', 
                number: '100451171924987', 
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/6/68/BANK_BRI_logo.svg/320px-BANK_BRI_logo.svg.png', 
                type: 'va',
                category: 'Bank Transfer'
            },
            cimb: { 
                displayName: 'CIMB Niaga Virtual Account',
                accountHolder: 'Octo Pay - 6289510639366', 
                number: '6289510639366', 
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/3/38/CIMB_Niaga_logo.svg/330px-CIMB_Niaga_logo.svg.png', 
                type: 'va',
                category: 'Bank Transfer'
            },
            permata_va: { 
                displayName: 'Permata Virtual Account',
                accountHolder: 'DOKU ISIDOKU-Muhammad Rizal Setiawan', 
                number: '8566661171924987', 
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/f/ff/Permata_Bank_%282024%29.svg/512px-Permata_Bank_%282024%29.svg.png', 
                type: 'va',
                category: 'Bank Transfer'
            },
            danamon_va: { 
                displayName: 'Danamon Virtual Account', 
                accountHolder: 'DOKU ISIDOKU-Muhammad Rizal Setiawan', 
                number: '8907001171924987', 
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/7/7b/Danamon.svg/330px-Danamon.svg.png', 
                type: 'va',
                category: 'Bank Transfer'
            },
            gopay: { 
                displayName: 'Gopay', 
                accountHolder: 'Gopay 6289510639366', 
                number: '089510639366', 
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/86/Gopay_logo.svg/320px-Gopay_logo.svg.png', 
                type: 'ewallet',
                category: 'E-Wallet'
            },
            dana: { 
                displayName: 'DANA', 
                accountHolder: 'DNID089510639366', 
                number: '089510639366', 
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/7/72/Logo_dana_blue.svg/330px-Logo_dana_blue.svg.png', 
                type: 'ewallet',
                category: 'E-Wallet'
            },
            ovo: { 
                displayName: 'OVO', 
                accountHolder: 'OVO Epayment', 
                number: '089510639366', 
                logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/eb/Logo_ovo_purple.svg/330px-Logo_ovo_purple.svg.png', 
                type: 'ewallet',
                category: 'E-Wallet'
            }
        };

        // --- TEMPLATE FUNCTIONS ---
        const getProductInfoHTML = (pkg) => `
            <div class="text-center">
                <img alt="Logo Adobe Lightroom" class="h-16 w-auto mx-auto mb-4" src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/Adobe_Photoshop_Lightroom_CC_logo.svg/1200px-Adobe_Photoshop_Lightroom_CC_logo.svg.png">
                <h1 class="text-3xl md:text-4xl font-bold text-white">${pkg.title}</h1>
                <p class="text-lg text-gray-300 mt-2">Ubah foto biasa jadi luar biasa dengan satu klik.</p>
                <div class="text-5xl font-bold text-white mt-6">${pkg.priceDisplay}</div>
                <p class="text-gray-400 text-sm mt-1">Sekali Bayar untuk Akses Selamanya</p>
            </div>`;

        const getFeaturesHTML = (pkg) => {
            return `<div>
                <h3 class="text-lg font-bold mb-4 text-white">Yang Anda Dapatkan:</h3>
                <ul class="space-y-4">${pkg.features.map((f) => `<li class="flex items-start"><i class="fas fa-check-circle text-blue-400 mt-1 mr-3"></i><span class="text-gray-300">${f}</span></li>`).join('')}</ul>
            </div>`;
        }
        
        const getPaymentMethodsHTML = (accounts) => {
            const groupedAccounts = {};
            for (const key in accounts) {
                const account = accounts[key];
                if (!groupedAccounts[account.category]) {
                    groupedAccounts[account.category] = [];
                }
                groupedAccounts[account.category].push({ key, ...account });
            }

            let html = `<h2 class="text-xl font-bold mb-5 text-white">3. Pilih Metode Pembayaran</h2>`;
            const categoryOrder = ['Bank Transfer', 'E-Wallet'];

            for (const category of categoryOrder) {
                if (groupedAccounts[category]) {
                    html += `<h3 class="text-lg font-semibold text-gray-300 mt-6 mb-3">${category}</h3>`;
                    html += `<div class="border border-gray-700 rounded-lg payment-group">`;

                    groupedAccounts[category].forEach((account, index) => {
                        const isFirst = index === 0 && category === 'Bank Transfer';
                        const isLast = index === groupedAccounts[category].length - 1;
                        
                        html += `
                            <div class="${!isLast ? 'border-b border-gray-700' : ''}">
                                <input type="radio" id="${account.key}" name="payment-method" value="${account.key}" class="payment-radio" ${isFirst ? 'checked' : ''}>
                                <label for="${account.key}" class="payment-label">
                                    <img src="${account.logo}" alt="Logo ${account.displayName}" class="payment-logo">
                                    <span class="font-medium text-gray-200 flex-grow">${account.displayName}</span>
                                    <span class="custom-radio-button"><span class="dot"></span></span>
                                </label>
                            </div>
                        `;
                    });
                    html += `</div>`;
                }
            }

            html += `
                <div class="bg-gray-800 p-3 mt-4 rounded-lg text-center text-sm text-gray-400">
                    Pembayaran ini diproses oleh Doku
                </div>
            `;

            return html;
        };

        const getOrderDetailsHTML = (pkg, totalPrice) => `
            <div class="mt-8 pt-6 border-t border-gray-700">
                 <h3 class="text-lg font-bold mb-4 text-white">Rincian Pesanan</h3>
                 <div class="space-y-3 text-gray-400">
                     <div class="flex justify-between">
                         <span>Harga Paket</span>
                         <span class="font-medium text-white">${formatCurrency(pkg.price)}</span>
                     </div>
                     <div class="flex justify-between">
                         <span>Kode Unik</span>
                         <span class="font-medium text-white">${formatCurrency(uniqueCode)}</span>
                     </div>
                     <hr class="my-2 border-gray-700">
                     <div class="flex justify-between font-bold text-lg text-white">
                         <span>Total</span>
                         <span>${formatCurrency(totalPrice)}</span>
                     </div>
                 </div>
            </div>`;

        const getTestimonialsHTML = () => `
            <div>
                <h2 class="text-2xl font-bold text-center mb-8 text-white">Contoh Hasil Preset</h2>
                <div class="grid grid-cols-2 sm:grid-cols-2 gap-4">
                    <img src="https://down-id.img.susercontent.com/file/20c85b67e572cc2b2510893daf3db0c7.webp" alt="Contoh Preset 1" class="testimonial-image rounded-lg w-full h-auto object-cover aspect-[3/4]" onclick="openImageModal(event, this.src)">
                    <img src="https://down-id.img.susercontent.com/file/9282ad76c267c41e28fc2ad8d4a497b5.webp" alt="Contoh Preset 2" class="testimonial-image rounded-lg w-full h-auto object-cover aspect-[3/4]" onclick="openImageModal(event, this.src)">
                    <img src="https://down-id.img.susercontent.com/file/a777654f3989cf391fb6daecf95edbeb.webp" alt="Contoh Preset 3" class="testimonial-image rounded-lg w-full h-auto object-cover aspect-[3/4]" onclick="openImageModal(event, this.src)">
                    <img src="https://down-id.img.susercontent.com/file/id-11134103-7r98t-llr1ioqle8x780.webp" alt="Contoh Preset 4" class="testimonial-image rounded-lg w-full h-auto object-cover aspect-[3/4]" onclick="openImageModal(event, this.src)">
                </div>
            </div>`;

        const getFaqHTML = () => `
             <div>
                 <h3 class="text-2xl font-bold mb-4 text-center text-white">Pertanyaan Umum (FAQ)</h3>
                 <details class="faq-item">
                     <summary>Apa itu Preset Lightroom?</summary>
                     <div class="faq-content">Preset adalah filter siap pakai yang berisi pengaturan edit (seperti warna, kontras, dan cahaya) yang bisa Anda terapkan ke foto hanya dengan satu klik untuk mendapatkan tampilan yang konsisten dan profesional.</div>
                 </details>
                 <details class="faq-item">
                     <summary>Apakah bisa digunakan di HP (Android/iOS)?</summary>
                     <div class="faq-content">Tentu saja! Preset kami berformat DNG yang kompatibel penuh dengan aplikasi Adobe Lightroom Mobile gratis di Android maupun iPhone. Anda tidak perlu langganan berbayar.</div>
                 </details>
                 <details class="faq-item">
                     <summary>Apakah saya perlu langganan Adobe Lightroom?</summary>
                     <div class="faq-content">Tidak perlu. Untuk penggunaan di HP, Anda cukup mengunduh aplikasi Adobe Lightroom Mobile yang gratis. Untuk di PC/Desktop, Anda bisa menggunakan versi apa pun.</div>
                 </details>
                 <details class="faq-item">
                     <summary>Bagaimana cara install-nya?</summary>
                     <div class="faq-content">Sangat mudah! Setelah pembayaran, Anda akan mendapatkan link download beserta video tutorial lengkap yang memandu Anda langkah demi langkah cara meng-install preset di HP dan PC.</div>
                 </details>
                 <details class="faq-item">
                     <summary>Apakah ada biaya bulanan atau tahunan?</summary>
                     <div class="faq-content">Tidak ada! Ini adalah pembayaran sekali untuk selamanya. Anda akan mendapatkan akses ke 4000+ preset dan semua update di masa depan tanpa biaya tambahan.</div>
                 </details>
             </div>
        `;
        
        const getPolicyHTML = () => `
            <div>
                <h3 class="text-2xl font-bold mb-4 text-center text-white">Kebijakan & Ketentuan</h3>
                <div class="grid md:grid-cols-1 gap-8 text-sm text-gray-400">
                    <div class="mb-6">
                        <h4 class="text-lg font-bold mb-2 text-white">Kebijakan Pembelian</h4>
                        <p class="mb-4">Produk yang dijual adalah produk digital (file preset) yang akan dikirim melalui link download setelah pembayaran dikonfirmasi. Pastikan email yang Anda masukkan aktif dan benar.</p>
                        <ul class="list-disc list-inside space-y-1">
                            <li>File dikirim via link download.</li>
                            <li>Tidak ada pengiriman fisik.</li>
                            <li>Karena sifat produk digital, pembelian tidak dapat dibatalkan atau dikembalikan (non-refundable).</li>
                            <li>Kami memberikan garansi bantuan instalasi sampai berhasil.</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="text-lg font-bold mb-2 text-white">Syarat & Ketentuan</h4>
                         <p class="mb-4">Dengan membeli produk ini, Anda setuju untuk tidak menjual kembali atau mendistribusikan ulang file preset yang Anda terima. Preset ini untuk penggunaan pribadi atau komersial pada karya foto Anda.</p>
                        <ul class="list-disc list-inside space-y-1">
                            <li>Dilarang menjual atau membagikan ulang file preset.</li>
                            <li>Satu pembelian berlaku untuk satu pengguna.</li>
                            <li>Kami tidak bertanggung jawab atas perubahan kebijakan Adobe di masa depan.</li>
                            <li>Dukungan teknis hanya mencakup instalasi dan penggunaan preset.</li>
                        </ul>
                    </div>
                </div>
            </div>
        `;

        // --- FUNCTIONS ---
        function formatCurrency(value) {
            return `Rp${value.toLocaleString('id-ID', { minimumFractionDigits: 0 })}`;
        }

        function updateDisplay() {
            const pkg = packageInfo;
            const totalPrice = pkg.price + uniqueCode;
            elements.productInfoFormTop.innerHTML = getProductInfoHTML(pkg);
            elements.featuresBeforeForm.innerHTML = getFeaturesHTML(pkg);
            elements.paymentMethodSelection.innerHTML = getPaymentMethodsHTML(paymentAccounts);
            elements.orderDetailsInForm.innerHTML = getOrderDetailsHTML(pkg, totalPrice);
            elements.testimonialsFull.innerHTML = getTestimonialsHTML();
            elements.faqFull.innerHTML = getFaqHTML();
            elements.policyFull.innerHTML = getPolicyHTML();
        }

        function generateWaLink(formData, pkg, totalPrice, paymentMethodName, paymentId) {
            const detailPesanan = `*Email:* ${formData.get('email')}\n`;
            const pesanWA = `Halo, saya ingin konfirmasi pembayaran untuk pesanan:\n\n` +
                          `*ID Pembayaran:* ${paymentId}\n` +
                          `*Paket:* ${pkg.name}\n` +
                          `*Metode Pembayaran:* ${paymentMethodName}\n` +
                          `*Nama:* ${formData.get('nama')}\n` +
                          `*No. WhatsApp:* ${formData.get('whatsapp')}\n` +
                          detailPesanan +
                          `*Total Transfer:* ${formatCurrency(totalPrice)}\n\n` +
                          `Saya sudah melakukan transfer. Mohon untuk segera diproses. Terima kasih.`;
            return `https://wa.me/6285602152097?text=${encodeURIComponent(pesanWA)}`;
        }

        function showPaymentInstructions(formData, pkg, totalPrice, paymentAccount, paymentId, paymentMethodKey) {
            window.scrollTo(0, 0); 
            
            if (typeof fbq === 'function') {
                fbq('track', 'AddPaymentInfo', { content_name: pkg.name, content_category: 'Digital Goods', currency: 'IDR', value: totalPrice });
            }

            elements.mainContentContainer.style.display = 'none';
            elements.footer.style.display = 'none';
            
            const waLink = generateWaLink(formData, pkg, totalPrice, paymentAccount.displayName, paymentId);
            
            let accountLabel = 'Nomor';
            let instructionAccordionHTML = '';

            switch (paymentMethodKey) {
                case 'bca_va':
                    accountLabel = 'Nomor Virtual Account';
                    instructionAccordionHTML = `
                        <details class="payment-accordion"><summary>ATM BCA</summary><div class="payment-accordion-content"><ol class="space-y-2">
                            <li>Masukkan Kartu ATM BCA & PIN Anda.</li>
                            <li>Pilih menu <strong>Transaksi Lainnya > Transfer > Ke Rekening BCA Virtual Account</strong>.</li>
                            <li>Masukkan nomor virtual account: <strong>${paymentAccount.number}</strong>.</li>
                            <li>Pastikan detail pembayaran (No. VA, Nama, Total Tagihan) sudah sesuai.</li>
                            <li>Masukkan jumlah transfer sesuai Total Tagihan, lalu ikuti instruksi untuk menyelesaikan transaksi.</li>
                            <li>Simpan struk sebagai bukti pembayaran.</li>
                        </ol></div></details>
                        <details class="payment-accordion"><summary>m-BCA (BCA Mobile)</summary><div class="payment-accordion-content"><ol class="space-y-2">
                            <li>Login ke aplikasi BCA Mobile dan pilih menu <strong>m-BCA</strong>.</li>
                            <li>Pilih <strong>m-Transfer > BCA Virtual Account</strong>.</li>
                            <li>Masukkan nomor virtual account: <strong>${paymentAccount.number}</strong>.</li>
                            <li>Konfirmasi detail pembayaran dan masukkan PIN m-BCA Anda.</li>
                            <li>Simpan notifikasi yang muncul sebagai bukti pembayaran.</li>
                        </ol></div></details>
                        <details class="payment-accordion"><summary>Internet Banking BCA</summary><div class="payment-accordion-content"><ol class="space-y-2">
                            <li>Login ke situs KlikBCA dan pilih menu <strong>Pembayaran Tagihan > Pembayaran > BCA Virtual Account</strong>.</li>
                            <li>Masukkan nomor virtual account pada kolom kode bayar.</li>
                            <li>Pastikan detail pembayaran sudah sesuai, lalu masukkan password dan mToken Anda.</li>
                            <li>Simpan struk pembayaran sebagai bukti.</li>
                        </ol></div></details>
                    `;
                    break;
                case 'bri_va':
                     accountLabel = 'Nomor Virtual Account';
                    instructionAccordionHTML = `
                        <details class="payment-accordion"><summary>ATM BRI</summary><div class="payment-accordion-content"><ol class="space-y-2">
                            <li>Masukkan Kartu Debit BRI & PIN Anda.</li>
                            <li>Pilih menu <strong>Transaksi Lain > Pembayaran > Lainnya > BRIVA</strong>.</li>
                            <li>Masukkan nomor BRIVA: <strong>${paymentAccount.number}</strong>.</li>
                            <li>Pastikan detail pembayaran (No. BRIVA, Nama, Jumlah) sudah sesuai.</li>
                            <li>Ikuti instruksi untuk menyelesaikan transaksi dan simpan struknya.</li>
                        </ol></div></details>
                        <details class="payment-accordion"><summary>Mobile Banking BRI (BRImo)</summary><div class="payment-accordion-content"><ol class="space-y-2">
                            <li>Login ke aplikasi BRImo dan pilih menu <strong>BRIVA</strong>.</li>
                            <li>Pilih pembayaran baru dan masukkan nomor BRIVA: <strong>${paymentAccount.number}</strong>.</li>
                            <li>Pastikan detail pembayaran sudah sesuai, lalu masukkan PIN Anda.</li>
                            <li>Simpan notifikasi yang muncul sebagai bukti pembayaran.</li>
                        </ol></div></details>
                        <details class="payment-accordion"><summary>Internet Banking BRI</summary><div class="payment-accordion-content"><ol class="space-y-2">
                            <li>Login ke situs Internet Banking BRI.</li>
                            <li>Pilih menu <strong>Pembayaran Tagihan > Pembayaran > BRIVA</strong>.</li>
                            <li>Masukkan nomor BRIVA, pastikan detailnya benar, lalu masukkan password dan mToken Anda.</li>
                            <li>Simpan struk sebagai bukti pembayaran.</li>
                        </ol></div></details>
                    `;
                    break;
                case 'permata_va':
                    accountLabel = 'Nomor Virtual Account';
                    instructionAccordionHTML = `
                        <details class="payment-accordion"><summary>Permata Mobile X</summary><div class="payment-accordion-content"><ol class="space-y-2">
                            <li>Buka aplikasi PermataMobile X dan login.</li>
                            <li>Pilih menu <strong>Pembayaran Tagihan > Virtual Account</strong>.</li>
                            <li>Masukkan nomor virtual account: <strong>${paymentAccount.number}</strong>.</li>
                            <li>Masukkan nominal pembayaran sesuai tagihan.</li>
                            <li>Konfirmasi pembayaran dan masukkan Kode Otentikasi Transaksi.</li>
                        </ol></div></details>
                        <details class="payment-accordion"><summary>ATM Permata</summary><div class="payment-accordion-content"><ol class="space-y-2">
                            <li>Masukkan Kartu ATM & PIN Anda.</li>
                            <li>Pilih menu <strong>Transaksi Lainnya > Pembayaran > Pembayaran Lainnya > Virtual Account</strong>.</li>
                            <li>Masukkan nomor virtual account: <strong>${paymentAccount.number}</strong>.</li>
                            <li>Pastikan informasi pembayaran sudah benar, lalu pilih "Benar".</li>
                        </ol></div></details>
                        <details class="payment-accordion"><summary>ATM Jaringan Lain (PRIMA/ALTO)</summary><div class="payment-accordion-content"><ol class="space-y-2">
                            <li>Pilih menu <strong>Transfer > Ke Rekening Bank Lain</strong>.</li>
                            <li>Masukkan kode Bank Permata (013) diikuti nomor virtual account: <strong>013${paymentAccount.number}</strong>.</li>
                            <li>Masukkan nominal pembayaran sesuai tagihan.</li>
                            <li>Pastikan detail transaksi benar, lalu selesaikan transaksi.</li>
                        </ol></div></details>
                    `;
                    break;
                case 'danamon_va':
                    accountLabel = 'Nomor Virtual Account';
                    instructionAccordionHTML = `
                        <details class="payment-accordion"><summary>ATM Danamon</summary><div class="payment-accordion-content"><ol class="space-y-2">
                            <li>Masukkan Kartu ATM & PIN Anda.</li>
                            <li>Pilih menu <strong>Pembayaran > Lainnya > Virtual Account</strong>.</li>
                            <li>Masukkan nomor virtual account: <strong>${paymentAccount.number}</strong>.</li>
                            <li>Pastikan data pembayaran benar, lalu pilih "YA".</li>
                            <li>Simpan struk sebagai bukti pembayaran.</li>
                        </ol></div></details>
                        <details class="payment-accordion"><summary>D-Mobile (Mobile Banking)</summary><div class="payment-accordion-content"><ol class="space-y-2">
                            <li>Login ke aplikasi D-Mobile.</li>
                            <li>Pilih menu <strong>Pembayaran > Virtual Account</strong>.</li>
                            <li>Masukkan nomor virtual account: <strong>${paymentAccount.number}</strong>.</li>
                            <li>Pastikan data pembayaran benar, lalu masukkan mPIN Anda.</li>
                        </ol></div></details>
                        <details class="payment-accordion"><summary>ATM Jaringan Lain (Bersama/Alto/Prima)</summary><div class="payment-accordion-content"><ol class="space-y-2">
                            <li>Pilih menu <strong>Transfer > Transfer ke Bank Lain</strong>.</li>
                            <li>Masukkan kode Bank Danamon (011) diikuti nomor virtual account: <strong>011${paymentAccount.number}</strong>.</li>
                            <li>Masukkan jumlah pembayaran sesuai tagihan.</li>
                            <li>Pastikan data pembayaran benar, lalu selesaikan transaksi.</li>
                        </ol></div></details>
                    `;
                    break;
                 case 'bni_va': // Generic VA for BNI
                    accountLabel = 'Nomor Virtual Account';
                    instructionAccordionHTML = `
                        <details class="payment-accordion"><summary>Cara Pembayaran</summary><div class="payment-accordion-content"><ol class="space-y-2">
                            <li>Pilih menu <strong>Transfer</strong> atau <strong>Pembayaran</strong> pada ATM, Mobile, atau Internet Banking BNI Anda.</li>
                            <li>Pilih opsi <strong>Virtual Account Billing</strong>.</li>
                            <li>Masukkan nomor virtual account: <strong>${paymentAccount.number}</strong>.</li>
                            <li>Pastikan detail pembayaran (Nama, Total Tagihan) sudah sesuai.</li>
                            <li>Lanjutkan transaksi hingga selesai dan simpan bukti pembayaran.</li>
                        </ol></div></details>
                    `;
                    break;
                case 'gopay':
                case 'dana':
                case 'ovo':
                    accountLabel = `Nomor ${paymentAccount.displayName}`;
                    instructionAccordionHTML = `
                        <details class="payment-accordion" open>
                            <summary>Cara Bayar via Aplikasi ${paymentAccount.displayName}</summary>
                            <div class="payment-accordion-content">
                                <ol class="space-y-2">
                                    <li>Buka aplikasi <strong>${paymentAccount.displayName}</strong> Anda.</li>
                                    <li>Pilih menu <strong>Bayar</strong> atau <strong>Transfer</strong>.</li>
                                    <li>Pilih opsi transfer ke <strong>Sesama ${paymentAccount.displayName}</strong> atau <strong>ke Nomor HP</strong>.</li>
                                    <li>Masukkan nomor tujuan: <strong>${paymentAccount.number}</strong>.</li>
                                    <li>Masukkan nominal transfer sebesar <strong>${formatCurrency(totalPrice)}</strong>.</li>
                                    <li>Pastikan nama penerima (${paymentAccount.accountHolder}) sudah sesuai.</li>
                                    <li>Masukkan PIN Anda untuk menyelesaikan pembayaran.</li>
                                </ol>
                            </div>
                        </details>
                    `;
                    break;
                case 'cimb':
                    accountLabel = 'Nomor Rekening';
                    instructionAccordionHTML = `
                        <details class="payment-accordion"><summary>Cara Bayar via OCTO Mobile / Clicks</summary>
                            <div class="payment-accordion-content">
                                <ol class="space-y-2">
                                    <li>Login ke aplikasi OCTO Mobile atau OCTO Clicks.</li>
                                    <li>Pilih menu <strong>Transfer</strong>.</li>
                                    <li>Pilih <strong>Transfer ke Rekening CIMB Niaga Lainnya</strong>.</li>
                                    <li>Masukkan nomor rekening tujuan: <strong>${paymentAccount.number}</strong>.</li>
                                    <li>Masukkan nominal transfer sebesar <strong>${formatCurrency(totalPrice)}</strong>.</li>
                                    <li>Pastikan detail transaksi benar, lalu selesaikan pembayaran.</li>
                                </ol>
                            </div>
                        </details>
                        <details class="payment-accordion">
                            <summary>Cara Bayar via Bank Lain</summary>
                            <div class="payment-accordion-content">
                                <ol class="space-y-2">
                                    <li>Pilih menu <strong>Transfer Antar Bank</strong> atau <strong>Transfer Online</strong>.</li>
                                    <li>Pilih <strong>CIMB Niaga (Kode Bank: 022)</strong> sebagai bank tujuan.</li>
                                    <li>Masukkan nomor rekening tujuan: <strong>${paymentAccount.number}</strong>.</li>
                                    <li>Masukkan nominal transfer sebesar <strong>${formatCurrency(totalPrice)}</strong>.</li>
                                    <li>Selesaikan transaksi dan simpan bukti pembayaran.</li>
                                </ol>
                            </div>
                        </details>
                    `;
                    break;
            }

            const paymentViewHTML = `
            <div class="payment-instruction-card">
                <div class="payment-instruction-header">
                    <h2 class="text-lg font-bold">Instruksi Pembayaran</h2>
                    <button onclick="window.location.reload()" class="text-2xl">&times;</button>
                </div>
                
                <div class="payment-instruction-body">
                    <div class="text-center border-b border-gray-700 pb-6">
                        <p class="text-sm text-gray-400">Total Pembayaran</p>
                        <div class="flex justify-center items-center gap-2 mt-1">
                            <h3 class="text-3xl font-bold text-white">${formatCurrency(totalPrice)}</h3>
                            <button onclick="copyToClipboard('${totalPrice}', 'Total Pembayaran')" class="text-gray-400 hover:text-blue-400">
                                <i class="far fa-copy"></i>
                            </button>
                        </div>
                        <p class="text-sm text-gray-400 mt-4">Order ID: <strong class="text-white">${paymentId}</strong></p>
                    </div>

                    <div class="text-center py-4">
                        <p class="text-sm text-red-500 font-semibold">
                            Bayar dalam <span id="countdown-timer">23:59:59</span>
                        </p>
                    </div>

                    <div class="border-t border-b border-gray-700 py-6">
                        <div class="flex justify-between items-center">
                            <p class="font-bold text-white">${paymentAccount.displayName}</p>
                            <img src="${paymentAccount.logo}" alt="Logo ${paymentAccount.displayName}" class="h-6 bg-white p-1 rounded">
                        </div>
                        <p class="text-sm text-gray-400 mt-4">Lakukan pembayaran ke tujuan berikut.</p>
                        
                        <div class="mt-4">
                            <p class="text-xs text-gray-500">${accountLabel}</p>
                            <div class="flex justify-between items-center">
                                <p class="text-lg font-semibold text-white">${paymentAccount.number}</p>
                                <button onclick="copyToClipboard('${paymentAccount.number}', '${accountLabel}')" class="copy-button">Salin</button>
                            </div>
                        </div>
                         ${paymentAccount.accountHolder ? `
                            <div class="mt-2">
                                <p class="text-xs text-gray-500">Atas Nama</p>
                                <p class="text-lg font-semibold text-white">${paymentAccount.accountHolder}</p>
                            </div>
                        ` : ''}
                    </div>

                    <div>
                        ${instructionAccordionHTML}
                    </div>
                </div>

                <div class="payment-instruction-footer text-center">
                     <p class="text-gray-400 mb-4 text-sm">Setelah transfer, jangan lupa konfirmasi pembayaran Anda.</p>
                     <a href="${waLink}" target="_blank" class="cta-button light-blue-button w-full">
                        <i class="fab fa-whatsapp text-xl"></i> 
                        <span>Konfirmasi Pembayaran</span>
                     </a>
                </div>
            </div>
            `;
            elements.paymentInstructionContainer.innerHTML = paymentViewHTML;
            startCountdown();
        }

        async function handleFormSubmit() {
            const formData = new FormData(elements.orderForm);
            const nama = formData.get('nama').trim();
            const whatsapp = formData.get('whatsapp').trim();
            const email = formData.get('email').trim();
            const paymentMethodKey = document.querySelector('input[name="payment-method"]:checked')?.value;

            if (!nama || !whatsapp || !email || !paymentMethodKey) {
                showInfoModal('Data Belum Lengkap', 'Mohon lengkapi semua data dan pilih metode pembayaran.');
                return;
            }

            elements.submitBtn.disabled = true;
            elements.submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i> Memproses...';

            const pkg = packageInfo;
            const totalPrice = pkg.price + uniqueCode;
            const paymentAccount = paymentAccounts[paymentMethodKey];
            const now = new Date();
            const paymentId = `LR${now.getDate()}${now.getMonth()+1}${String(now.getFullYear()).slice(-2)}${now.getHours()}${now.getMinutes()}${String(totalPrice).slice(-3)}`;

            let submissionSuccess = false;
            try {
                const followUpMessage = `Halo kak ${nama},\n\nTerima kasih telah memesan *${pkg.name}*.\n\nBerikut adalah rincian pembayaran untuk pesanan Anda:\n- ID Pesanan: ${paymentId}\n- Total Pembayaran: *${formatCurrency(totalPrice)}*\n\nMohon segera selesaikan pembayaran Anda ke:\n*- Metode:* ${paymentAccount.displayName}\n*- Nomor:* ${paymentAccount.number}` + (paymentAccount.accountHolder ? `\n*- Atas Nama:* ${paymentAccount.accountHolder}` : ``) + `\n\n*Penting:* Mohon transfer sesuai dengan jumlah total di atas (termasuk kode unik) agar pesanan Anda dapat kami proses secara otomatis.\n\nSetelah transfer, silakan balas pesan ini untuk konfirmasi.\n\nTerima kasih`;
                const formattedWhatsapp = whatsapp.startsWith('0') ? '62' + whatsapp.substring(1) : whatsapp;
                const followUpLink = `https://wa.me/${formattedWhatsapp}?text=${encodeURIComponent(followUpMessage)}`;

                const formDataForStaticForms = {
                    apiKey: 'sf_195b5fj92dge8l9b391mng1g',
                    replyTo: email,
                    honeypot: formData.get('honeypot'),
                    name: nama,
                    email: email,
                    whatsapp: whatsapp,
                    '$ID Pembayaran': paymentId,
                    '$Paket': pkg.name,
                    '$Metode Pembayaran': paymentAccount.displayName,
                    '$Total Transfer': formatCurrency(totalPrice),
                    '$Link Follow Up WA': followUpLink
                };

                const response = await fetch('https://api.staticforms.xyz/submit', {
                    method: 'POST',
                    body: JSON.stringify(formDataForStaticForms),
                    headers: { 'Content-Type': 'application/json' }
                });
                
                if (response.ok) {
                    submissionSuccess = true;
                } else {
                    console.error("Static Forms server error:", response.status, await response.text());
                }

            } catch (e) {
                console.error("Network error during form submission:", e);
            }

            elements.submitBtn.disabled = false;
            elements.submitBtn.innerHTML = 'Beli Sekarang';

            if (submissionSuccess) {
                showPaymentInstructions(formData, pkg, totalPrice, paymentAccount, paymentId, paymentMethodKey);
            } else {
                showInfoModal('Pengiriman Gagal', 'Maaf, terjadi kesalahan saat mengirim data Anda. Silakan coba lagi.');
            }
        }
        
        function startCountdown() {
            const countdownElement = document.getElementById('countdown-timer');
            if (!countdownElement) return;

            let timeInSeconds = 24 * 60 * 60; 

            countdownInterval = setInterval(() => {
                timeInSeconds--;
                if (timeInSeconds < 0) {
                    clearInterval(countdownInterval);
                    countdownElement.textContent = "Waktu Habis";
                    return;
                }

                const hours = Math.floor(timeInSeconds / 3600);
                const minutes = Math.floor((timeInSeconds % 3600) / 60);
                const seconds = timeInSeconds % 60;

                countdownElement.textContent = 
                    `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;

            }, 1000);
        }

        // --- NOTIFICATION FUNCTIONS ---
        const FIRST_NAMES = [
          "Adi Saputra", "Agus Setiawan", "Ahmad Fauzi", "Aji Santoso", "Aminah Sari",
          "Amir Hidayat", "Andi Wijaya", "Andre Gunawan", "Angga Pratama", "Ani Lestari",
          "Anisa Rahmawati", "Anton Nugroho", "Ari Wibowo", "Arif Budiman", "Asep Sunandar",
          "Bayu Prasetyo", "Bambang Susilo", "Bella Puspita", "Bima Sakti", "Budi Hartono",
          "Cahya Purnama", "Candra Kirana", "Cecep Firmansyah", "Citra Dewi", "Dadan Hamdani",
          "Dedi Mulyadi", "Deni Ramdani", "Desi Ratnasari", "Dewi Anggraini", "Dian Permata",
          "Dimas Kurniawan", "Dina Mardiana", "Dinda Ayu", "Doni Setiawan", "Eka Putri",
          "Eko Wahyudi", "Endah Wulandari", "Erick Setiawan", "Erwin Syahputra", "Eva Yuliana",
          "Fajar Nugraha", "Farah Diba", "Farhan Jaelani", "Fatima Zahra", "Fauzan Azima",
          "Febri Haryadi", "Fernando Siregar", "Fikri Haikal", "Fitriani", "Galih Santosa",
          "Gilang Permana", "Hadi Susanto", "Hafiz Alfarisi", "Hana Pertiwi", "Handoko",
          "Harianto", "Hasan Basri", "Hendra Gunawan", "Heru Purnomo", "Hidayat Taufik",
          "Ibrahim Malik", "Ichsan Maulana", "Ida Royani", "Ihsanudin", "Ilham Akbar",
          "Imam Prasetyo", "Indah Sari", "Indra Kusuma", "Iqbal Ramadhan", "Irfan Maulana",
          "Irwan Setiadi", "Ismail Marzuki", "Ivan Gunardi", "Jaka Swara", "Jamaludin",
          "Jefri Setiawan", "Joko Purwanto", "Joni Iskandar", "Julia Perez", "Kamaludin",
          "Kartika Sari", "Kevin Sanjaya", "Khairul Anwar", "Krisna Murti", "Kurniawan Dwi",
          "Lestari Indah", "Lia Amelia", "Lina Marlina", "Lisa Andriani", "Lukman Hakim",
          "Lutfi Hasan", "Made Suardika", "Maulana Yusuf", "Mega Wati", "Mila Karmila",
          "Mira Lesmana", "Mochammad Iqbal", "Monica Sari", "Muhammad Ridwan", "Mukti Ali",
          "Muslimah", "Nadia Putri", "Nana Sutisna", "Nanda Pratama", "Nia Daniaty",
          "Nina Wang", "Novi Aulia", "Novita Sari", "Nuraini", "Nurul Huda",
          "Putra Wijaya", "Putri Lestari", "Rachmat Saleh", "Raden Saleh", "Raditya Putra",
          "Rafli Mursalim", "Rahayu", "Rahman Hakim", "Rahmat Santoso", "Rama Dhani",
          "Rangga Setiawan", "Rani Puspita", "Ratna Sari", "Reza Pahlevi", "Rian Ardianto",
          "Rico Tampati", "Ridwan Kamil", "Rina Gunawan", "Rini Yulianti", "Rio Dewanto",
          "Riri Riza", "Riska Amelia", "Rizki Febian", "Rizky Billar", "Robby Darwis",
          "Robertino", "Roni Wahyudi", "Rossa Amelia", "Rudi Hartono", "Ryan Hidayat",
          "Sakti", "Samuel Rizal", "Sari Nila", "Satria Baja", "Selly Hasan",
          "Septian David", "Setiawan", "Sinta Bella", "Siti Nurhaliza", "Sofia Latjuba",
          "Sonia Fergina", "Sri Mulyani", "Sugeng Rahayu", "Sugiarto", "Suharto",
          "Sujatmiko", "Sukma Ayu", "Sulaiman", "Sumardi", "Sunarto",
          "Surya Adi", "Susanto", "Susi Susanti", "Tania Putri", "Taufik Hidayat",
          "Tedi Supriadi", "Thomas Djorghi", "Tian", "Tika Ramlan", "Tina Toon",
          "Tono", "Tony Sucipto", "Tri Utami", "Umar Bakri", "Usman",
          "Utami", "Vera", "Vicky Prasetyo", "Vina Panduwinata", "Wahyu",
          "Wahyudi", "Wawan Hendrawan", "Wibowo", "Widi", "Widodo",
          "Wijaya", "Wulan Guritno", "Yani", "Yanto", "Yoga",
          "Yogi", "Yohanes", "Yosef", "Yuda", "Yudi",
          "Yulia", "Yulianto", "Yuni", "Yusuf", "Zahra",
          "Zainal", "Zaki"
        ];
        
        function getRandomElement(arr) { return arr[Math.floor(Math.random() * arr.length)]; }
        function generateRandomName() { return `${getRandomElement(FIRST_NAMES)}`; }
        
        function showNextNotification() {
            if (!elements.notifBox || !elements.notifName) return;
            elements.notifName.textContent = generateRandomName();
            elements.notifBox.classList.remove('show');
            void elements.notifBox.offsetWidth; // Trigger reflow
            elements.notifBox.classList.add('show');
        }

        function scheduleNextNotification() {
            const randomDelay = Math.floor(Math.random() * 10000) + 8000;
            setTimeout(() => {
                showNextNotification();
                scheduleNextNotification();
            }, randomDelay);
        }

        // --- INITIALIZATION ---
        elements.currentYear.textContent = new Date().getFullYear();
        elements.submitBtn.addEventListener('click', handleFormSubmit);
        updateDisplay();
        if (elements.notifBox && elements.notifName) {
            setTimeout(scheduleNextNotification, 6000);
        }

    });

    // --- GLOBAL HELPER FUNCTIONS ---
    const infoModal = document.getElementById('infoModal');
    const imageModal = document.getElementById('imageModal');
    const modalImage = document.getElementById('modalImage');

    function showInfoModal(title, message) {
        if (!infoModal) return;
        infoModal.querySelector('#modalTitle').textContent = title;
        infoModal.querySelector('#modalMessage').textContent = message;
        infoModal.style.display = 'flex';
    }

    function closeInfoModal() {
        if (!infoModal) return;
        infoModal.style.display = 'none';
    }

    function openImageModal(event, src) {
        event.stopPropagation(); 
        if (!imageModal || !modalImage) return;
        imageModal.style.display = "flex";
        modalImage.src = src;
    }

    function closeImageModal() {
        if (!imageModal) return;
        imageModal.style.display = "none";
    }

    window.onclick = function(event) {
        if (event.target == infoModal) {
            closeInfoModal();
        }
        if (event.target == imageModal) {
            closeImageModal();
        }
    }

    function copyToClipboard(text, entityName) {
        const textArea = document.createElement('textarea');
        textArea.value = text;
        document.body.appendChild(textArea);
        textArea.select();
        try {
            document.execCommand('copy');
            showInfoModal('Berhasil Disalin!', `${entityName} telah disalin ke clipboard.`);
        } catch (err) {
            showInfoModal('Gagal!', 'Gagal menyalin. Silakan coba secara manual.');
        }
        document.body.removeChild(textArea);
    }
    </script>

</body>
</html>
