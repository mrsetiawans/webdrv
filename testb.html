<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perangkat Ajar Deep Learning 2025/2026 - Lengkap & Modern</title>
    <link rel="icon" type="image/png" href="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9c/Logo_of_Ministry_of_Education_and_Culture_of_Republic_of_Indonesia.svg/100px-Logo_of_Ministry_of_Education_and_Culture_of_Republic_of_Indonesia.svg.png">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcode/1.5.1/qrcode.min.js"></script>

    <!-- Facebook Pixel -->
    <script>
      !function(f,b,e,v,n,t,s)
      {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
      n.callMethod.apply(n,arguments):n.queue.push(arguments)};
      if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
      n.queue=[];t=b.createElement(e);t.async=!0;
      t.src=v;s=b.getElementsByTagName(e)[0];
      s.parentNode.insertBefore(t,s)}(window, document,'script',
      'https://connect.facebook.net/en_US/fbevents.js');
      fbq('init', '630583642253416');
      fbq('track', 'PageView');
    </script>
    <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=630583642253416&ev=PageView&noscript=1"
    /></noscript>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        display: ['Plus Jakarta Sans', 'sans-serif'],
                    },
                    colors: {
                        brand: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            900: '#1e3a8a',
                        }
                    },
                    boxShadow: {
                        'soft': '0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03)',
                        'card': '0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.025)',
                    }
                }
            }
        }
    </script>

    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #1e293b; }
        .font-display { font-family: 'Plus Jakarta Sans', sans-serif; }
        
        /* Smooth Form Inputs */
        .input-field {
            transition: all 0.2s ease-in-out;
        }
        .input-field:focus {
            transform: translateY(-1px);
        }

        /* Radio Card Selection */
        .radio-card-input:checked + .radio-card {
            border-color: #2563eb;
            background-color: #eff6ff;
            box-shadow: 0 0 0 2px #2563eb;
        }
        .radio-card-input:checked + .radio-card .check-icon {
            opacity: 1;
            transform: scale(1);
        }

        /* Testimonial Scroller */
        .scroller {
            mask: linear-gradient(90deg, transparent, white 10%, white 90%, transparent);
            -webkit-mask: linear-gradient(90deg, transparent, white 10%, white 90%, transparent);
        }
        .scroller__inner {
            width: max-content;
            flex-wrap: nowrap;
            animation: scroll 60s linear infinite;
        }
        .scroller:hover .scroller__inner { animation-play-state: paused; }
        @keyframes scroll { to { transform: translate(calc(-50% - 0.5rem)); } }

        /* Modal Transitions */
        .modal { transition: opacity 0.3s ease-out; opacity: 0; pointer-events: none; }
        .modal.active { opacity: 1; pointer-events: auto; }
        .modal-content { transition: transform 0.3s ease-out; transform: scale(0.95); }
        .modal.active .modal-content { transform: scale(1); }

        /* Notification Toast */
        .toast-enter { transform: translateY(-100%); opacity: 0; }
        .toast-enter-active { transform: translateY(0); opacity: 1; transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1); }
        .toast-exit { transform: translateY(0); opacity: 1; }
        .toast-exit-active { transform: translateY(-100%); opacity: 0; transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1); }
    </style>
</head>
<body class="antialiased pb-20 md:pb-0">

    <!-- Sticky Header -->
    <header class="sticky top-0 z-40 bg-white/80 backdrop-blur-md border-b border-slate-200">
        <div class="max-w-3xl mx-auto px-4 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/9/9c/Logo_of_Ministry_of_Education_and_Culture_of_Republic_of_Indonesia.svg/100px-Logo_of_Ministry_of_Education_and_Culture_of_Republic_of_Indonesia.svg.png" alt="Logo" class="h-8 w-auto">
                <span class="font-display font-bold text-lg text-slate-800 tracking-tight">Merdeka<span class="text-brand-600">Mengajar</span></span>
            </div>
            <a href="#orderForm" class="hidden sm:inline-flex items-center justify-center px-4 py-2 text-sm font-semibold text-white transition-all bg-brand-600 rounded-full hover:bg-brand-700 hover:shadow-lg hover:shadow-brand-500/30">
                Pesan Sekarang
            </a>
        </div>
    </header>

    <!-- Main Container (Short Form Style - Single Column Focus) -->
    <main class="max-w-3xl mx-auto px-4 py-8 space-y-8">
        
        <!-- Hero Section -->
        <div class="text-center space-y-4">
            <span class="inline-block py-1 px-3 rounded-full bg-blue-50 text-brand-600 text-xs font-bold tracking-wide uppercase mb-2">
                Edisi Terbaru 2025/2026
            </span>
            <h1 class="font-display text-3xl md:text-5xl font-extrabold text-slate-900 leading-tight">
                Perangkat Ajar <br class="hidden sm:block"><span class="text-brand-600">Deep Learning</span> Lengkap
            </h1>
            <p class="text-slate-600 text-lg md:text-xl leading-relaxed max-w-2xl mx-auto">
                Solusi administrasi guru profesional. Hemat waktu, konten berkualitas, dan sesuai kurikulum nasional terbaru.
            </p>
        </div>

        <!-- Social Proof (Testimonials) -->
        <div class="scroller w-full overflow-hidden">
            <div class="scroller__inner flex gap-4" id="testimonial-track">
                <!-- Javascript will inject images here -->
            </div>
        </div>

        <!-- Feature Grid (Highlights) -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 text-center">
                <div class="w-10 h-10 mx-auto bg-blue-100 rounded-lg flex items-center justify-center text-brand-600 mb-3">
                    <i class="fas fa-book"></i>
                </div>
                <h3 class="font-bold text-slate-800 text-sm">Modul Ajar</h3>
                <p class="text-xs text-slate-500 mt-1">Terintegrasi & Lengkap</p>
            </div>
            <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 text-center">
                <div class="w-10 h-10 mx-auto bg-green-100 rounded-lg flex items-center justify-center text-green-600 mb-3">
                    <i class="fas fa-bullseye"></i>
                </div>
                <h3 class="font-bold text-slate-800 text-sm">CP & ATP</h3>
                <p class="text-xs text-slate-500 mt-1">Sesuai Panduan</p>
            </div>
            <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 text-center">
                <div class="w-10 h-10 mx-auto bg-purple-100 rounded-lg flex items-center justify-center text-purple-600 mb-3">
                    <i class="fas fa-file-alt"></i>
                </div>
                <h3 class="font-bold text-slate-800 text-sm">LKPD & Asesmen</h3>
                <p class="text-xs text-slate-500 mt-1">Formatif & Sumatif</p>
            </div>
            <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 text-center">
                <div class="w-10 h-10 mx-auto bg-orange-100 rounded-lg flex items-center justify-center text-orange-600 mb-3">
                    <i class="fas fa-gift"></i>
                </div>
                <h3 class="font-bold text-slate-800 text-sm">Bonus</h3>
                <p class="text-xs text-slate-500 mt-1">Media & Presentasi</p>
            </div>
        </div>

        <!-- Full Kelengkapan Paket (Restored Content) -->
        <div class="bg-white rounded-xl p-6 border border-slate-200">
            <h3 class="font-display font-bold text-lg text-slate-800 mb-4 text-center">Isi Paket Lengkap</h3>
            <ul class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm text-slate-600" id="kelengkapan-list">
                <!-- Javascript will inject list here -->
            </ul>
        </div>

        <!-- Order Form Card -->
        <div id="orderForm" class="bg-white rounded-2xl shadow-card border border-slate-100 overflow-hidden relative">
            <div class="absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-brand-500 to-purple-500"></div>
            
            <form id="mainOrderForm" class="p-6 md:p-8 space-y-8">
                
                <!-- Data Diri -->
                <div>
                    <h2 class="font-display text-xl font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <span class="flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 text-xs text-slate-600">1</span>
                        Data Pemesan
                    </h2>
                    <div class="grid grid-cols-1 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-slate-700 mb-1">Nama Lengkap</label>
                            <input type="text" name="nama" class="input-field w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none" placeholder="Contoh: Budi Santoso" required>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-1">Nomor WhatsApp</label>
                                <input type="tel" name="whatsapp" class="input-field w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none" placeholder="08..." required>
                                <p class="text-xs text-slate-500 mt-1">File akan dikirim ke nomor ini.</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-slate-700 mb-1">Alamat Email</label>
                                <input type="email" name="email" class="input-field w-full px-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-brand-500 focus:border-brand-500 outline-none" placeholder="nama@email.com" required>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Hidden Fields -->
                <input type="text" name="honeypot" style="display: none" tabindex="-1" autocomplete="off">
                <input type="hidden" name="sheetName" value="kurmer">

                <!-- Paket Selection -->
                <div>
                    <h2 class="font-display text-xl font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <span class="flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 text-xs text-slate-600">2</span>
                        Pilih Paket
                    </h2>
                    
                    <div id="order-items-container" class="space-y-4">
                        <!-- Items injected via JS -->
                    </div>

                    <button type="button" id="add-order-btn" class="mt-4 w-full py-3 border-2 border-dashed border-brand-200 rounded-xl text-brand-600 font-semibold hover:bg-brand-50 hover:border-brand-300 transition-all flex items-center justify-center gap-2">
                        <i class="fas fa-plus"></i> Tambah Mapel / Kelas Lain
                    </button>
                </div>

                <!-- Order Summary -->
                <div id="order-summary-container" class="bg-slate-50 rounded-xl p-4 md:p-6 border border-slate-100">
                    <!-- Summary injected via JS -->
                    <div class="text-center text-slate-500 text-sm">Belum ada paket yang dipilih.</div>
                </div>

                <!-- Payment Method -->
                <div>
                    <h2 class="font-display text-xl font-bold text-slate-800 mb-4 flex items-center gap-2">
                        <span class="flex items-center justify-center w-6 h-6 rounded-full bg-slate-100 text-xs text-slate-600">3</span>
                        Metode Pembayaran
                    </h2>
                    <div id="payment-method-grid" class="grid grid-cols-2 sm:grid-cols-3 gap-3">
                        <!-- Payment methods injected via JS -->
                    </div>
                </div>

                <!-- Submit Button -->
                <button type="button" id="submit-btn" class="w-full bg-brand-600 hover:bg-brand-700 text-white font-bold text-lg py-4 rounded-xl shadow-lg shadow-brand-500/30 transition-all transform hover:-translate-y-1 relative overflow-hidden group">
                    <span class="relative z-10 flex items-center justify-center gap-2">
                        <i class="fas fa-lock"></i> Bayar & Download Sekarang
                    </span>
                    <div class="absolute inset-0 bg-white/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"></div>
                </button>
                <p class="text-center text-xs text-slate-400 mt-2">
                    <i class="fas fa-shield-alt mr-1"></i> Transaksi Aman & Terenkripsi. Garansi Uang Kembali.
                </p>

            </form>
        </div>

        <!-- FAQ Accordion -->
        <div class="bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden">
             <div class="p-6 border-b border-slate-100">
                <h3 class="font-display font-bold text-lg text-slate-800">Pertanyaan Sering Diajukan</h3>
             </div>
             <div class="divide-y divide-slate-100" id="faq-container">
                 <!-- Static FAQ content -->
                <details class="group p-4 cursor-pointer">
                    <summary class="flex justify-between items-center font-medium text-slate-700 list-none group-open:text-brand-600 transition-colors">
                        <span>Apa format filenya?</span>
                        <span class="transition group-open:rotate-180"><i class="fas fa-chevron-down text-xs"></i></span>
                    </summary>
                    <div class="text-slate-500 text-sm mt-3 leading-relaxed group-open:animate-fadeIn">
                        File tersedia dalam format Microsoft Word (.docx) dan PDF. Mudah diedit dan disesuaikan dengan kebutuhan sekolah Anda.
                    </div>
                </details>
                <details class="group p-4 cursor-pointer">
                    <summary class="flex justify-between items-center font-medium text-slate-700 list-none group-open:text-brand-600 transition-colors">
                        <span>Bagaimana cara pengirimannya?</span>
                        <span class="transition group-open:rotate-180"><i class="fas fa-chevron-down text-xs"></i></span>
                    </summary>
                    <div class="text-slate-500 text-sm mt-3 leading-relaxed group-open:animate-fadeIn">
                        Otomatis! Setelah pembayaran dikonfirmasi, link download Google Drive akan langsung dikirim ke WhatsApp Anda.
                    </div>
                </details>
                <details class="group p-4 cursor-pointer">
                    <summary class="flex justify-between items-center font-medium text-slate-700 list-none group-open:text-brand-600 transition-colors">
                        <span>Apakah sesuai Kurikulum Nasional?</span>
                        <span class="transition group-open:rotate-180"><i class="fas fa-chevron-down text-xs"></i></span>
                    </summary>
                    <div class="text-slate-500 text-sm mt-3 leading-relaxed group-open:animate-fadeIn">
                        Ya, 100% sesuai dengan Capaian Pembelajaran (CP) terbaru dari Kemendikbudristek untuk tahun ajaran 2025/2026.
                    </div>
                </details>
             </div>
        </div>

        <footer class="text-center text-slate-400 text-sm pb-8">
            <p>&copy; <span id="currentYear">2025</span> Merdeka Mengajar. All rights reserved.</p>
        </footer>

    </main>

    <!-- Payment Overlay / Result Page (Hidden by default) -->
    <div id="payment-overlay" class="fixed inset-0 bg-white z-50 hidden overflow-y-auto">
        <div id="payment-instruction-container" class="max-w-xl mx-auto min-h-screen bg-white">
            <!-- Payment instructions injected here -->
        </div>
    </div>

    <!-- Modals -->
    <div id="infoModal" class="modal fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm">
        <div class="modal-content bg-white rounded-2xl shadow-2xl p-6 max-w-sm w-full text-center">
            <div class="w-12 h-12 bg-blue-100 text-blue-600 rounded-full flex items-center justify-center mx-auto mb-4 text-xl">
                <i class="fas fa-info"></i>
            </div>
            <h3 id="modalTitle" class="text-lg font-bold text-slate-900 mb-2">Info</h3>
            <p id="modalMessage" class="text-slate-500 text-sm mb-6">Pesan...</p>
            <button onclick="closeInfoModal()" class="w-full bg-slate-900 text-white font-medium py-2.5 rounded-lg hover:bg-slate-800 transition-colors">
                OK, Mengerti
            </button>
        </div>
    </div>

    <!-- Image Zoom Modal -->
    <div id="imageModal" class="modal fixed inset-0 z-[60] bg-black/90 backdrop-blur flex items-center justify-center p-4" onclick="closeImageModal()">
        <button class="absolute top-4 right-4 text-white/70 hover:text-white" onclick="closeImageModal()"><i class="fas fa-times text-2xl"></i></button>
        <button class="absolute left-4 top-1/2 -translate-y-1/2 text-white/50 hover:text-white p-2" onclick="showPrevImage(event)"><i class="fas fa-chevron-left text-3xl"></i></button>
        <button class="absolute right-4 top-1/2 -translate-y-1/2 text-white/50 hover:text-white p-2" onclick="showNextImage(event)"><i class="fas fa-chevron-right text-3xl"></i></button>
        <img id="modalImage" class="max-w-full max-h-[85vh] rounded-lg shadow-2xl transition-transform" onclick="event.stopPropagation()">
    </div>
    
    <!-- Notification Toast -->
    <div id="notifToast" class="fixed top-4 left-1/2 -translate-x-1/2 z-[70] bg-slate-900/90 backdrop-blur text-white px-4 py-3 rounded-full shadow-xl flex items-center gap-3 text-sm transition-all duration-500 opacity-0 -translate-y-full w-max max-w-[90vw]">
        <div class="bg-green-500 rounded-full p-1"><i class="fas fa-check text-[10px]"></i></div>
        <span id="notifText">Budi baru saja memesan!</span>
    </div>

    <!-- Templates -->
    <template id="order-item-template">
        <div class="order-item-card bg-white border border-slate-200 rounded-xl p-4 relative group hover:border-brand-300 transition-colors">
            <button type="button" class="remove-order-item-btn absolute -top-2 -right-2 bg-red-100 text-red-600 w-6 h-6 rounded-full flex items-center justify-center shadow-sm hover:bg-red-500 hover:text-white transition-all">
                <i class="fas fa-times text-xs"></i>
            </button>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <!-- Jenjang -->
                <div>
                    <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1 block">Jenjang</label>
                    <div class="relative">
                        <select name="jenjang" class="jenjang-select w-full appearance-none bg-slate-50 border border-slate-200 text-slate-700 py-2.5 px-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-500/50 focus:border-brand-500 text-sm">
                            <option value="">-- Pilih --</option>
                        </select>
                        <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none text-slate-400"><i class="fas fa-chevron-down text-xs"></i></div>
                    </div>
                </div>
                <!-- Jurusan (SMK Only) -->
                <div class="jurusan-group hidden md:col-span-2">
                    <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1 block">Jurusan</label>
                    <div class="relative">
                        <select name="jurusan" class="jurusan-select w-full appearance-none bg-slate-50 border border-slate-200 text-slate-700 py-2.5 px-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-500/50 focus:border-brand-500 text-sm" disabled>
                            <option value="">-- Pilih Jurusan --</option>
                        </select>
                        <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none text-slate-400"><i class="fas fa-chevron-down text-xs"></i></div>
                    </div>
                </div>
                <!-- Kelas -->
                <div>
                    <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1 block">Kelas</label>
                    <div class="relative">
                        <select name="kelas" class="kelas-select w-full appearance-none bg-slate-50 border border-slate-200 text-slate-700 py-2.5 px-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-500/50 focus:border-brand-500 text-sm" disabled>
                            <option value="">-- Pilih --</option>
                        </select>
                        <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none text-slate-400"><i class="fas fa-chevron-down text-xs"></i></div>
                    </div>
                </div>
                <!-- Mapel -->
                <div class="md:col-span-2">
                    <label class="text-xs font-semibold text-slate-500 uppercase tracking-wider mb-1 block">Mata Pelajaran</label>
                    <div class="relative">
                        <select name="mapel" class="mapel-select w-full appearance-none bg-slate-50 border border-slate-200 text-slate-700 py-2.5 px-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-brand-500/50 focus:border-brand-500 text-sm" disabled>
                            <option value="">-- Pilih --</option>
                        </select>
                        <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none text-slate-400"><i class="fas fa-chevron-down text-xs"></i></div>
                    </div>
                </div>
            </div>
            <!-- Price Tag -->
            <div class="price-preview-box hidden mt-3 bg-blue-50 rounded-lg px-3 py-2 flex justify-between items-center border border-blue-100">
                <span class="text-xs text-brand-600 font-medium"><i class="fas fa-tag mr-1"></i> Harga Paket</span>
                <span class="price-value text-sm font-bold text-brand-700">Rp0</span>
            </div>
        </div>
    </template>

    <script>
    // --- DATA & CONFIG ---
    const pricing = { "SD/MI": 50000, "SMP/MTS": 75000, "SMA/MAN": 100000, "SMK/MAK": { umum: 100000, kejuruan: 125000 } };
    const operatorPrefixes = { 'Telkomsel': ['0811', '0812', '0813', '0821', '0822', '0823', '0851', '0852', '0853'], 'by.U': ['0851'], 'Indosat Ooredoo': ['0814', '0815', '0816', '0855', '0856', '0857', '0858'], 'Tri (3)': ['0895', '0896', '0897', '0898', '0899'], 'XL Axiata': ['0817', '0818', '0819', '0859', '0877', '0878', '0879'], 'Live.On': ['0859'], 'Axis': ['0831', '0832', '0833', '0838'], 'Smartfren': ['0881', '0882', '0883', '0884', '0885', '0886', '0887', '0888', '0889'] };
    const blacklistedNumbers = ['081234567890'];
    const paymentAccounts = {
        qris: { displayName: 'QRIS', accountHolder: 'Epay', number: '00020101021126610016ID.CO.SHOPEE.WWW01189360091800223157700208223157700303UMI51440014ID.CO.QRIS.WWW0215ID10254270621910303UMI5204481453033605802ID5904Epay6013JAKARTA PUSAT61051061062070703A0163042F15', logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/a/a2/Logo_QRIS.svg/163px-Logo_QRIS.svg.png', type: 'qris' },
        cimb: { displayName: 'Cimb Niaga', accountHolder: 'Octo Pay - 6289510639366', number: '6289510639366', logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/3/38/CIMB_Niaga_logo.svg/330px-CIMB_Niaga_logo.svg.png', type: 'va' },
        bca_va: { displayName: 'BCA VA', accountHolder: 'Epayment', number: '39358089510639366', logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/5/5c/Bank_Central_Asia.svg/330px-Bank_Central_Asia.svg.png', type: 'va' },
        gopay: { displayName: 'Gopay', accountHolder: 'Gopay 6289510639366', number: '089510639366', logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/8/86/Gopay_logo.svg/320px-Gopay_logo.svg.png', type: 'ewallet' },
        dana: { displayName: 'DANA', accountHolder: 'DNID089510639366', number: '089510639366', logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/7/72/Logo_dana_blue.svg/330px-Logo_dana_blue.svg.png', type: 'ewallet' },
        ovo: { displayName: 'OVO', accountHolder: 'OVO Epayment', number: '089510639366', logo: 'https://upload.wikimedia.org/wikipedia/commons/thumb/e/eb/Logo_ovo_purple.svg/330px-Logo_ovo_purple.svg.png', type: 'ewallet' }
    };

    const mapelSD = ["Bahasa Indonesia", "Bahasa Inggris", "Ilmu Pengetahuan Alam dan Sosial", "Koding dan Kecerdasan Artifisial", "Matematika", "Muatan Lokal", "Pendidikan Agama Buddha dan Budi Pekerti", "Pendidikan Agama Hindu dan Budi Pekerti", "Pendidikan Agama Islam dan Budi Pekerti", "Pendidikan Agama Katolik dan Budi Pekerti", "Pendidikan Agama Khonghucu dan Budi Pekerti", "Pendidikan Agama Kristen dan Budi Pekerti", "Pendidikan Jasmani Olahraga dan Kesehatan", "Pendidikan Pancasila", "Seni Musik", "Seni Rupa", "Seni Tari", "Seni Teater"];
    const mapelSMP = ["Bahasa Indonesia", "Bahasa Inggris", "Ilmu Pengetahuan Alam", "Ilmu Pengetahuan Sosial", "Informatika", "Koding dan Kecerdasan Artifisial", "Matematika", "Muatan Lokal", "Pendidikan Agama Buddha dan Budi Pekerti", "Pendidikan Agama Hindu dan Budi Pekerti", "Pendidikan Agama Islam dan Budi Pekerti", "Pendidikan Agama Katolik dan Budi Pekerti", "Pendidikan Agama Khonghucu dan Budi Pekerti", "Pendidikan Agama Kristen dan Budi Pekerti", "Pendidikan Jasmani Olahraga dan Kesehatan", "Pendidikan Pancasila", "Prakarya Budi Daya", "Prakarya Kerajinan", "Prakarya Pengolahan", "Prakarya Rekayasa", "Seni Musik", "Seni Rupa", "Seni Tari", "Seni Teater"];
    const mapelSMA = ["Antropologi", "Bahasa Indonesia", "Bahasa Indonesia Tingkat Lanjut", "Bahasa Inggris", "Bahasa Inggris Tingkat Lanjut", "Bahasa Jepang", "Bahasa Jerman", "Bahasa Korea", "Bahasa Mandarin", "Bahasa Prancis", "Biologi", "Ekonomi", "Fisika", "Geografi", "Informatika", "Kimia", "Koding dan Kecerdasan Artifisial", "Matematika", "Matematika Tingkat Lanjut", "Muatan Lokal", "Pendidikan Agama Buddha dan Budi Pekerti", "Pendidikan Agama Hindu dan Budi Pekerti", "Pendidikan Agama Islam dan Budi Pekerti", "Pendidikan Agama Katolik dan Budi Pekerti", "Pendidikan Agama Khonghucu dan Budi Pekerti", "Pendidikan Agama Kristen dan Budi Pekerti", "Pendidikan Jasmani Olahraga dan Kesehatan", "Pendidikan Pancasila", "Prakarya dan Kewirausahaan", "Sejarah", "Sejarah Tingkat Lanjut", "Seni Musik", "Seni Rupa", "Seni Tari", "Seni Teater", "Sosiologi"];
    const mapelSMKUmum = ["Bahasa Indonesia", "Bahasa Inggris", "Dasar-Dasar Program Keahlian", "Informatika", "Koding dan Kecerdasan Artifisial", "Konsentrasi Keahlian", "Kreativitas Inovasi dan Kewirausahaan", "Matematika", "Muatan Lokal", "Pendidikan Agama Buddha dan Budi Pekerti", "Pendidikan Agama Hindu dan Budi Pekerti", "Pendidikan Agama Islam dan Budi Pekerti", "Pendidikan Agama Katolik dan Budi Pekerti", "Pendidikan Agama Khonghucu dan Budi Pekerti", "Pendidikan Agama Kristen dan Budi Pekerti", "Pendidikan Jasmani Olahraga dan Kesehatan", "Pendidikan Pancasila", "Praktik Kerja Lapangan", "Projek Ilmu Pengetahuan Alam dan Sosial", "Sejarah", "Seni Musik", "Seni Rupa", "Seni Tari", "Seni Teater"];
    const mapelAgama = ["Akidah Akhlak", "Sejarah Kebudayaan Islam", "Al-Quran Hadis", "Bahasa Arab", "Fiqih"];

    const educationalData = {
            "SD/MI": {
                "Kelas 1": mapelSD, "Kelas 2": mapelSD, "Kelas 3": mapelSD,
                "Kelas 4": mapelSD, "Kelas 5": mapelSD, "Kelas 6": mapelSD
            },
            "SMP/MTS": {
                "Kelas 7": mapelSMP, "Kelas 8": mapelSMP, "Kelas 9": mapelSMP
            },
            "SMA/MAN": {
                "Kelas 10": mapelSMA, "Kelas 11": mapelSMA, "Kelas 12": mapelSMA
            },
            "SMK/MAK": {
                "Akuntansi dan Keuangan Lembaga (AKL)": {
                    "Kelas 10": [...mapelSMKUmum, ...["Akuntansi Dasar", "Aplikasi Pengolah Angka/Spreadsheet", "Etika Profesi", "Perbankan Dasar"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Administrasi Pajak", "Akuntansi Keuangan", "Komputer Akuntansi", "Praktikum Akuntansi Lembaga/Instansi Pemerintah", "Praktikum Akuntansi Perusahaan Jasa, Dagang, Manufaktur"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Administrasi Pajak", "Akuntansi Keuangan", "Komputer Akuntansi", "Produk Kreatif dan Kewirausahaan"].sort()]
                },
                "Teknik Komputer dan Jaringan (TKJ)": {
                    "Kelas 10": [...mapelSMKUmum, ...["Dasar Desain Grafis", "Komputer dan Jaringan Dasar", "Pemrograman Dasar", "Simulasi dan Komunikasi Digital", "Sistem Komputer"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Administrasi Infrastruktur Jaringan (AIJ)", "Administrasi Sistem Jaringan (ASJ)", "Teknologi Jaringan Berbasis Luas (WAN)", "Teknologi Layanan Jaringan (TLJ)"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Administrasi Infrastruktur Jaringan (AIJ)", "Administrasi Sistem Jaringan (ASJ)", "Keamanan Jaringan", "Produk Kreatif dan Kewirausahaan", "Teknologi Layanan Jaringan (TLJ)"].sort()]
                },
                "Farmasi Klinis, Komunitas & Industri": {
                    "Kelas 10": [...mapelSMKUmum, ...["Dasar-dasar Farmakognosi", "Dasar-dasar Farmakologi", "Dasar-dasar Kefarmasian", "Dasar-dasar Kerja di Laboratorium", "Perundang-undangan Kesehatan"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Administrasi Farmasi", "Farmakognosi", "Farmakologi Dasar", "Ilmu Kesehatan Masyarakat", "Kimia Farmasi", "Teknik Farmasi & Peracikan Obat"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Manajemen Bahan", "Pelayanan Farmasi", "Pengujian dan Pengendalian Mutu Produk", "Perencanaan Produksi dan Persediaan", "Produk Kreatif dan Kewirausahaan", "Riset dan Pengembangan Farmasi", "Teknik Pembuatan Sediaan Obat", "Teknologi Pengemasan Obat"].sort()]
                },
                "Perhotelan": {
                    "Kelas 10": [...mapelSMKUmum, ...["Kepariwisataan", "Sanitasi, Hygiene, dan Keselamatan Kerja", "Tata Hidang"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Manajemen Hotel", "Operasi Dapur dan Tata Boga", "Pelayanan Pelanggan", "Room Division (Front Office, Housekeeping, Laundry)"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Administrasi Hotel", "Manajemen Event/Acara", "Manajemen Restoran", "Produk Kreatif dan Kewirausahaan"].sort()]
                },
                "Teknik Mesin/Pemesinan": {
                    "Kelas 10": [...mapelSMKUmum, ...["Dasar Perancangan Teknik Mesin", "Dasar-dasar Teknik Pemesinan", "Teknik Gambar Mesin (manual/CAD)", "Teknologi Mekanik"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Praktikum Pemesinan", "Teknik Pemesinan Bubut", "Teknik Pemesinan Frais", "Teknik Pemesinan Gerinda", "Teknik Pengelasan (OAW, SMAW, MIG/MAG)"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Gambar Teknik Manufaktur", "Kelistrikan Mesin (mesin industri)", "Produk Kreatif dan Kewirausahaan", "Teknik Pemesinan NC/CNC dan CAM"].sort()]
                },
                "Tata Boga/Kuliner": {
                    "Kelas 10": [...mapelSMKUmum, ...["Boga Dasar", "Ilmu Gizi", "Pengetahuan Bahan Makanan", "Sanitasi, Hygiene dan Keselamatan Kerja"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Pengolahan dan Penyajian Makanan Indonesia dan Kontinental", "Tata Hidang"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Hidangan Kesempatan Khusus & Fusion Food", "Pengelolaan Usaha Boga", "Produk Kreatif dan Kewirausahaan"].sort()]
                },
                "Rekayasa Perangkat Lunak (RPL)": {
                    "Kelas 10": [...mapelSMKUmum, ...["Dasar Desain Grafis", "Komputer dan Jaringan Dasar", "Pemrograman Dasar", "Sistem Komputer"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Basis Data", "Pemodelan Perangkat Lunak", "Pemrograman Berorientasi Objek"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Basis Data", "Pemrograman Web dan Perangkat Bergerak", "Produk Kreatif dan Kewirausahaan"].sort()]
                },
                "Multimedia": {
                    "Kelas 10": [...mapelSMKUmum, ...["Desain Grafis Percetakan", "Desain Interaktif", "Desain Media Interaktif", "Komunikasi Visual"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Pengembangan Game", "Pengembangan Multimedia", "Teknik Animasi 2D dan 3D", "Teknik Pengolahan Audio dan Video"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Editing Audio", "Produk Kreatif dan Kewirausahaan", "Produksi Sinema dan Film"].sort()]
                },
                "Teknik Otomotif (TKR: Mobil, TSM: Motor)": {
                    "Kelas 10": [...mapelSMKUmum, ...["Chassis dan Sistem Pemindah Tenaga", "Dasar-dasar Mesin Kendaraan", "Kelistrikan Otomotif"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Pemeliharaan dan Tune-up Mesin", "Teknologi Otomotif Terbaru (injeksi, ECU, scanner diagnostik)"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Pemeliharaan Kelistrikan/Mesin/Sasis Kendaraan Ringan", "Produk Kreatif dan Kewirausahaan"].sort()]
                },
                "Teknik Instalasi dan Tenaga Listrik": {
                    "Kelas 10": [...mapelSMKUmum, ...["Dasar-dasar Kelistrikan & Elektronika", "Gambar Teknik Listrik", "Pekerjaan Dasar Elektromekanik"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Instalasi Motor Listrik", "Instalasi Tenaga Listrik (rumah, industri, gedung)", "Perbaikan Peralatan Listrik", "Sistem Kontrol Otomasi Industri"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Keselamatan Kerja Listrik", "Produk Kreatif dan Kewirausahaan", "Proteksi Jaringan Tenaga Listrik", "Teknik Pembangkit/Jaringan Tenaga Listrik"].sort()]
                },
                "Tata Busana": {
                    "Kelas 10": [...mapelSMKUmum, ...["Dasar Desain", "Pembuatan Pola", "Pengetahuan Bahan Tekstil", "Teknologi Menjahit"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Desain Busana", "Pembuatan Busana Custom Made", "Pembuatan Hiasan Busana"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Pembuatan Busana Industri", "Produk Kreatif dan Kewirausahaan"].sort()]
                },
                "Animasi": {
                    "Kelas 10": [...mapelSMKUmum, ...["Animasi Dasar", "Desain Karakter", "Estetika Animasi", "Storyboard", "Teknik Penggambaran"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Animasi 2D dan 3D", "Digital Processing", "Penggunaan perangkat lunak animasi", "Videografi Animasi"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Produk Kreatif dan Kewirausahaan", "Produksi Animasi (projek nyata)"].sort()]
                },
                "Otomatisasi dan Tata Kelola Perkantoran (OTKP)": {
                    "Kelas 10": [...mapelSMKUmum, ...["Dasar-dasar Administrasi", "Dasar-dasar Akuntansi", "Ekonomi Bisnis", "Simulasi Digital", "Teknologi Perkantoran"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Kearsipan", "Korespondensi", "Otomatisasi Tata Kelola Kepegawaian", "Otomatisasi Tata Kelola Keuangan", "Pengelolaan Surat Masuk dan Keluar"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Komputer Administrasi Perkantoran", "Otomatisasi Tata Kelola Humas dan Keprotokolan", "Otomatisasi Tata Kelola Sarana dan Prasarana", "Pengelolaan Informasi", "Produk Kreatif dan Kewirausahaan"].sort()]
                },
                "Broadcasting dan Perfilman (Produksi dan Siaran Program Televisi)": {
                    "Kelas 10": [...mapelSMKUmum, ...["Dasar Editing Video", "Dasar-dasar Fotografi, Tata Kamera, Tata Artistik, Tata Suara", "Dasar-dasar Produksi Siaran dan Film", "Pengantar Naskah dan Storyboard", "Pengoperasian Kamera Video dan DSLR", "Teknik Pengambilan Gambar dan Pencahayaan Dasar"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Dasar-dasar Jurnalistik dan Penyiaran", "Estetika Seni Audio Visual", "Komunikasi Visual dan Penyajian Pesan Audio-Visual", "Peralatan Audio Video", "Penulisan Skenario Film dan Televisi", "Produksi Film Pendek", "Produksi Program Televisi"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Media Digital", "Pengelolaan Produksi dan Post-produksi", "Penyutradaraan, Sinematografi, dan Tata Artistik", "Produk Kreatif dan Kewirausahaan", "Proyek Siaran Sekolah/TV Komunitas", "Teknik Editing Lanjut (Video, Audio, Color Grading)", "Teknik Penyiaran (Radio & TV Digital)"].sort()]
                },
                "Tata Graha (Housekeeping/Perawatan Kamar)": {
                    "Kelas 10": [...mapelSMKUmum, ...["Pembersihan Area Umum Hotel"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Penataan Ruang Serbaguna", "Penyiapan Kamar Tamu"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Housekeeping (Manajemen Tata Graha)", "Praktik Housekeeping", "Produk Kreatif dan Kewirausahaan", "Tata Graha Kamar Hotel"].sort()]
                },
                "Asisten Keperawatan": {
                    "Kelas 10": [...mapelSMKUmum, ...["Anatomi Fisiologi", "Ilmu Kesehatan Masyarakat", "Komunikasi Keperawatan", "Konsep Dasar Keperawatan"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Dasar Farmakologi", "Dokumentasi Keperawatan", "Keterampilan Dasar Tindakan Keperawatan", "Komunikasi Terapeutik", "Praktik Laboratorium"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Asuhan Keperawatan", "Dokumentasi Tindakan Keperawatan", "Kesehatan Reproduksi", "Pemeriksaan Laboratorium", "Produk Kreatif dan Kewirausahaan"].sort()]
                },
                "Teknik Konstruksi dan Perumahan/Bangunan": {
                    "Kelas 10": [...mapelSMKUmum, ...["Gambar Teknik Bangunan", "Melaksanakan Pekerjaan Pondasi Dangkal", "Mekanika Teknik", "Simulasi Digital", "Ukur Tanah"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Konstruksi Bangunan", "Konstruksi Bangunan Gedung", "Melaksanakan Pekerjaan Beton", "Melaksanakan Pemasangan Bata dan Kusen", "Teknik Konstruksi Baja, Kayu, Batu dan Beton"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Estimasi Biaya Konstruksi, Sanitasi dan Perawatan Gedung", "Melaksanakan Pekerjaan Kuda-kuda", "Melaksanakan Pekerjaan Plester dan Acian", "Melaksanakan Pemasangan Rangka dan Penutup Atap", "Perawatan Gedung", "Produk Kreatif dan Kewirausahaan", "Sistem Utilitas Bangunan Gedung"].sort()]
                },
                "Desain Grafika (Graphic Design)": {
                    "Kelas 10": [...mapelSMKUmum, ...["Dasar-Dasar Seni Rupa", "Gambar Sketsa", "Pengetahuan Bahan Grafika"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Desain Grafis Percetakan", "Komputer Grafis", "Software Desain (CorelDraw, Adobe Illustrator, Adobe Photoshop)", "Teknik Percetakan"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Desain Media Cetak", "Desain Publikasi", "Pengembangan Multimedia", "Produk Kreatif dan Kewirausahaan", "Videografi"].sort()]
                },
                "Manajemen Logistik/Teknik Logistik": {
                    "Kelas 10": [...mapelSMKUmum, ...["Logistik dan Rantai Pasokan", "Regulasi Sektor Logistik dan Keselamatan Kerja"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Administrasi Pergudangan", "Manajemen Penanganan Bahan", "Penanganan Transportasi", "Sistem Manajemen Logistik"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Manajemen Distribusi dan Delivery", "Produk Kreatif dan Kewirausahaan", "Teknologi Logistik"].sort()]
                },
                "Pariwisata/Usaha Perjalanan Wisata (UPW/ULP)": {
                    "Kelas 10": [...mapelSMKUmum, ...["Administrasi Pariwisata", "Komunikasi Pariwisata", "Pengetahuan Destinasi Wisata"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Pemandu Perjalanan Wisata", "Pemesanan Tempat & Ticket Penerbangan", "Penyusunan Itinerary", "Ticketing Penerbangan", "Tour Planning"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Budgeting Wisata", "Event Management/Manajemen Acara", "Pemasaran Pariwisata", "Perencanaan & Pengelolaan Perjalanan Wisata", "Praktik Kerja Lapangan di Industri Pariwisata", "Produk Kreatif dan Kewirausahaan"].sort()]
                },
                "Teknik Pengelasan dan Fabrikasi Logam": {
                    "Kelas 10": [...mapelSMKUmum, ...["Dasar Perancangan Teknik Mesin", "Fabrikasi Logam Dasar", "Gambar Teknik Mesin", "Pekerjaan Dasar Teknik Mesin", "Teknik Gambar dan Simbol Las"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Teknik Pengelasan Busur Manual (SMAW)", "Teknik Pengelasan Gas Metal (MIG/MAG)", "Teknik Pengelasan Gas Tungsten (TIG)", "Teknik Pengelasan Oksi-Asetelin (OAW)"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Penanganan Material dan Keselamatan Kerja", "Produk Kreatif dan Kewirausahaan", "Teknik Pengelasan FCAW"].sort()]
                },
                "Kebidanan": {
                    "Kelas 10": [...mapelSMKUmum, ...["Anatomi & Fisiologi", "Dasar-Dasar Obstetri & Ginekologi", "Ilmu Gizi", "Konsep dan Pelayanan Kebidanan"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Asuhan Kebidanan pada Anak", "Asuhan Kebidanan pada Ibu", "Farmakologi Dalam Kebidanan", "Komunikasi & Konseling", "Praktik Kebidanan"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Asuhan Kebidanan Persalinan dan Bayi Baru Lahir", "Dokumentasi Kebidanan", "Keluarga Berencana", "Kesehatan Perempuan dan Perencanaan Keluarga", "Penatalaksanaan Kegawatdaruratan", "Produk Kreatif dan Kewirausahaan"].sort()]
                },
                "Teknologi Laboratorium Medik (TLM/Analis Kesehatan)": {
                    "Kelas 10": [...mapelSMKUmum, ...["Anatomo Fisiologi", "Biologi Sel dan Molekuler", "Dasar Manajemen Laboratorium dan Kesehatan Lingkungan", "Fisiologi", "Flebotomi", "Instrumentasi", "Patofisiologi", "Pengantar Laboratorium Medik"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Bakteriologi", "Hematologi", "Histologi", "Imunoserologi", "Kimia Klinik", "Laboratorium Kesehatan Dasar", "Mikrobiologi Kesehatan", "Sitohistoteknologi", "Urinalisa dan Cairan Tubuh"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Kontrol Kualitas Prosedur Laboratorium", "Penanganan Sampel dan Reagen Laboratorium", "Pengendalian Mutu Hasil Pertanian", "Pemeriksaan Laboratorium", "Produk Kreatif dan Kewirausahaan"].sort()]
                },
                "Desain Komunikasi Visual (DKV)": {
                    "Kelas 10": [...mapelSMKUmum, ...["Dasar Desain", "Dasar-Dasar Seni Rupa", "Gambar Sketsa", "Komunikasi Visual"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Desain Grafis Percetakan", "Desain Media Interaktif", "Desain Publikasi", "Komputer Grafis", "Videografi"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Editing Audio", "Editing Video", "Pengembangan Game", "Pengembangan Multimedia", "Produk Kreatif dan Kewirausahaan", "Teknik Animasi 2D dan 3D", "Teknik Pengolahan Audio dan Video"].sort()]
                },
                "Dental Asisten (Kesehatan Gigi)": {
                    "Kelas 10": [...mapelSMKUmum, ...["Anatomi dan Fisiologi Gigi dan Mulut", "Radiografi Gigi", "Sterilisasi dan Kebersihan"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Etika dan Hukum dalam Praktek Dental", "Instrumen Klinis", "Kesehatan Mulut Anak-Anak", "Prosedur Pencegahan Infeksi", "Prosedur Perawatan Gigi Dasar"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Aspek Bisnis dalam Praktek Dental", "Dokumentasi Pasien Dental", "Farmakologi Dental", "Pelayanan Pasien Dental", "Penggunaan Perangkat Medis", "Produk Kreatif dan Kewirausahaan", "Standar Praktik Dental"].sort()]
                },
                "Pekerjaan Sosial & Caregiver (Perawatan Sosial)": {
                    "Kelas 10": [...mapelSMKUmum, ...["Dasar-dasar Keperawatan Sosial", "Kesehatan Mental", "Keterampilan Komunikasi"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Dukungan Sosial", "Kesehatan dan Kesejahteraan", "Pengembangan Keterampilan Pribadi", "Perawatan Dasar", "Perawatan Jangka Panjang"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Asuhan Sosial", "Dokumentasi Asuhan Sosial", "Komunikasi Terapeutik", "Manajemen Kesehatan Masyarakat", "Perawatan Lanjut Usia", "Praktik Keperawatan Sosial", "Produk Kreatif dan Kewirausahaan"].sort()]
                },
                "Agribisnis Pengolahan Hasil Pertanian": {
                    "Kelas 10": [...mapelSMKUmum, ...["Dasar Penanganan Bahan Hasil Pertanian", "Dasar Pengendalian Mutu Hasil Pertanian", "Dasar Proses Pengolahan Hasil Pertanian", "Kesehatan dan Keselamatan Kerja (K3)"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["GMP (Good Manufacturing Practice)", "Pengemasan, Penyimpanan dan Penggudangan", "Produksi Pengolahan Hasil Hewani", "Produksi Pengolahan Hasil Nabati", "Produksi Pengolahan Komoditas Perkebunan dan Herbal", "SSOP (Sanitation Standard Operating Procedures)"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Analisa Usaha Pengolahan Hasil Pertanian", "HACCP (Hazard Analysis Critical Control Point)", "Penanganan Limbah Pengolahan Hasil Pertanian", "Produk Kreatif dan Kewirausahaan", "Sistem Manajemen Keamanan Pangan dan Kualitas Produk"].sort()]
                },
                "Agribisnis Perikanan Air Tawar": {
                    "Kelas 10": [...mapelSMKUmum, ...["Dasar-dasar Budidaya Perikanan", "Kesehatan dan Keselamatan Kerja (K3)", "Pengelolaan Kualitas Air", "Pengendalian Hama dan Penyakit"].sort()],
                    "Kelas 11": [...mapelSMKUmum, ...["Pengelolaan Wadah dan Media Pendederan", "Produksi Pakan Alami dan Pakan Buatan", "Seleksi Benih", "Teknik Pembesaran Komoditas Perikanan", "Teknik Pendederan Komoditas Perikanan"].sort()],
                    "Kelas 12": [...mapelSMKUmum, ...["Analisis Kelayakan Usaha Perikanan", "Inovasi Teknologi Perikanan", "Pemanenan Hasil Produksi", "Pemasaran Hasil Produksi Komoditas Perikanan", "Pemantauan Laju Pertumbuhan", "Produk Kreatif dan Kewirausahaan"].sort()]
                }
            }
        };

    // --- UTILS ---
    function formatCurrency(value) { return `Rp${value.toLocaleString('id-ID')}`; }
    function isInvalidPattern(nomor) {
        if (blacklistedNumbers.includes(nomor)) return true;
        const numberPart = nomor.substring(2);
        if (/(\d)\1{4,}/.test(numberPart)) return true;
        for (let i = 0; i < numberPart.length - 4; i++) {
            const sub = numberPart.substring(i, i + 5);
            if ('0123456789'.includes(sub) || '9876543210'.includes(sub)) return true;
        }
        return new Set(numberPart.split('')).size < 4 || /(..)\1\1/.test(numberPart);
    }
    function validatePhoneNumber(nomorHp) {
        if (nomorHp.length < 10) return { isValid: false, message: 'Nomor terlalu pendek.' };
        const prefix = nomorHp.substring(0, 4);
        let found = false;
        for (const op in operatorPrefixes) { if (operatorPrefixes[op].includes(prefix)) found = true; }
        if (!found) return { isValid: false, message: 'Operator tidak dikenali.' };
        if (isInvalidPattern(nomorHp)) return { isValid: false, message: 'Pola nomor tidak valid.' };
        return { isValid: true };
    }

    // --- MAIN LOGIC ---
    let cart = [];
    let orderItemIdCounter = 0;
    const uniqueCode = Math.floor(Math.random() * (500 - 100 + 1)) + 100;
    
    // RESTORED DATA
    const kelengkapanPaket = [
        "Modul Ajar Terintegrasi Deep Learning (2 Semester)",
        "Capaian Pembelajaran (CP)",
        "Alur Tujuan Pembelajaran (ATP)",
        "Lembar Kerja Peserta Didik (LKPD)",
        "Asesmen (Diagnostik, Formatif, Sumatif)",
        "Program Tahunan (PROTA)",
        "Program Semester (PROMES)",
        "Alokasi Waktu Pembelajaran",
        "Administrasi Wali Kelas Lengkap",
        "Daftar Nilai & Jurnal Harian",
        "Analisis Penilaian Kurikulum Nasional",
        "Bonus: Media Ajar & Materi Presentasi"
    ];

    const testimonialImages = [
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0008.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0009.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0010.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0011.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0012.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0013.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0014.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0015.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0016.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0017.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0018.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0019.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0020.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0021.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0022.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0023.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0024.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0025.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0026.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0027.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0028.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0029.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0030.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0031.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0032.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0033.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0034.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0035.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0036.jpg",
        "https://cdn.allthepics.net/images/2025/09/11/IMG-20250827-WA0037.jpg"
    ];

    const notificationNames = [
        "Budi Santoso", "Ayu", "Rahmat", "Citra Dewi Kusuma", "Bayu Pratama", "Lina", "Wulan", "Adi", "Farhan Syahputra", "Hendra Wijaya", "Nana Puspita Dewi", "Joko", "Mega Sari", "Gilang Pramana Putra", "Sari", "Dedi", "Eka Suryani", "Teguh", "Putri Lestari Ayu", "Andi", "Bagus Wijaya", "Ilham Saputra Nugraha", "Rizal", "Mira Astuti", "Puspita", "Hari", "Tri Saputra", "Cahya Pratama", "Surya Darmawan Putra", "Wahyu Ramadhan", "Agus", "Indra Permana", "Linda", "Fajar Mahendra Saputra", "Yusuf", "Pramono Adi Nugroho", "Sinta Dewi", "Bima Pratama", "Dian", "Hasan Basri", "Nurul Aini", "Arif Budiman", "Feri", "Lukman Hakim", "Rangga", "Rini Anggraini Putri", "Tono", "Hadi Prasetyo", "Elisa Purnama", "Anisa Rahma", "Gunawan", "Melati", "Bagus Prasetyo Ramadhan", "Septi Amelia", "Cindy Amelia", "Windi Saputri", "Galih Pratama", "Evi", "Putra", "Slamet Riyadi", "Latif Hidayat", "Gita Puspita", "Darmawan", "Maya", "Erik Saputra Pratama", "Jani", "Jefri Maulana", "Bella Sari", "Maulana", "Novi Andriana Lestari", "Fajar Nugroho", "Taufik Hidayat", "Prasetyo", "Samsul", "Agung", "Endang", "Indah", "Hana Pertiwi", "Mirna", "Yulia", "Panca", "Niken", "Rio", "Adi Putra Ramadhan", "Ganda", "Wahida", "Robby Saputra", "Halim", "Firman Saputra", "Berlian Putra", "Ari", "Joko Setiawan", "Mustika", "Bahar", "Mega", "Erlangga", "Sofyan", "Doni", "Fatimah", "Dian Purnama Sari", "Rama", "Imam Saputra", "Johan", "Gusman", "Lintang", "Nabila", "Beni", "Purnama", "Murni", "Malik", "Nurlan", "Doni Saputra", "Lastri", "Berlinda", "Rasyid", "Tari", "Nia", "Tirta", "Juli Andriani", "Lutfi", "Suci", "Arman", "Yani", "Citra Ayu", "Harto", "Rangga Pratama", "Febrina", "Indra Gunawan Saputra", "Tomi", "Sutrisno", "Risma", "Jihan Ayu Pratiwi", "Lestari", "Dewi Kusuma", "Fahmi", "Rifki", "Wira", "Putra Wijaya", "Beni Setiawan", "Asep", "Gerry", "Prasetia", "Euis", "Latif", "Pajar", "Rahmat Hidayat", "Rudi", "Tika", "Danu", "Hesti", "Syahrul", "Anwar", "Miranti", "Nuraini", "Nurman", "Eman Kurnia", "Nirmala", "Hari Susanto", "Taufan", "Tono Prabowo", "Bayu Saputra Nugroho", "Darma", "Nurlaila", "Hafid", "Mustofa", "Elok", "Gunarto", "Novi", "Lasman", "Jamaludin", "Andi Wijaya Putra", "Herman", "Mila", "Wibowo", "Prayitno", "Adi Saputra", "Jamal", "Irfan", "Iskandar", "Yudha", "Lutris", "Samsul Hidayat", "Heru", "Bagus", "Rudianto", "Nanda Putri", "Laila Rahma", "Frans", "Hilda", "Cahya", "Rudi Pratama", "Setiawan", "Rangga Saputra", "Puspa", "Doni Prasetyo", "Nurul", "Febri", "Mega Sari Lestari", "Suyatno", "Tomiadi", "Fikri", "Lani", "Intan", "Johan Saputra", "Iwan", "Berliano", "Ilham", "Teddy", "Lani Puspita", "Eka Putri Andayani", "Hani", "Adi Wijaya", "Adit", "Dicky", "Gopal", "Pramono", "Gunadi", "Gilang", "Joko Prayitno Adi", "Mira", "Puspita Sari", "Maulana Hakim", "Putri Ayu Lestari", "Malik Prasetyo", "Toriq", "Joni", "Gilang Pratama", "Bagus Wijaya Putra", "Berlian", "Wandi", "Nurman Saputra", "Fajarudin", "Lutfi Pratama", "Citra", "Nanda", "Laras", "Tuti", "Yani Pratiwi", "Gusman Saputra", "Rangga Putra", "Prasetiawan", "Ismail", "Heri", "Adi Nugroho", "Putri", "Prasetyo Adi", "Dona", "Gani", "Jihan", "Puspita Dewi", "Rizal Maulana", "Mahendra", "Ayu Pratiwi", "Rangga Setiawan", "Lina Sari", "Fani", "Adi Wijaya Putra", "Sari Melati", "Andri", "Bima", "Teguh Santoso Adi", "Fajar", "Wulan Dewi", "Rama Pratama", "Nana", "Farhan", "Dion", "Melati Pertiwi", "Adi Putra", "Joko Santoso", "Doni Setiawan", "Lintang Pertiwi", "Septi", "Gopal Pramana", "Tomi Pratama", "Rio Nugraha", "Cindy", "Hafid Saputra", "Hendra", "Niken Lestari", "Rangga Nugroho", "Putri Ayu", "Sofyan Hidayat", "Robby", "Bima Saputra", "Indra", "Adi Kurniawan", "Nanda Saputra", "Gilang Saputra", "Wahyu", "Puspita Ayu", "Rudi Hartono", "Wulan Dewi Pertiwi", "Ayu Pratiwi Lestari", "Tono Adi", "Dedi Kurniawan", "Prasetyo Ramadhan", "Adi Setiawan", "Mira Lestari", "Farhan Syahputra Adi", "Nurul Hidayah", "Sari Anggraini", "Bayu", "Eman", "Putra Adi Nugroho", "Lestari Ayu", "Bambang", "Rangga Hidayat", "Mega Putri", "Adi Nugraha", "Anisa", "Siska", "Wandi Putra", "Fajar Saputra", "Gunawan Pratama", "Heri Setiawan", "Arif", "Ilham Nugroho", "Bagus Pratama", "Erlangga Putra", "Rian", "Pandu", "Tari Ayu", "Hendro", "Risma Ayu", "Adi Pratama", "Septi Ayu", "Bambang Santoso", "Lukman", "Gani Saputra", "Hasan", "Feri Kurniawan", "Tirta", "Bambang Prasetyo", "Pajar Saputra", "Arman Putra", "Murni Ayu", "Hafiz", "Euis Sari", "Bayu Nugroho", "Tomi Saputra", "Gerry Pratama", "Arif Prasetyo", "Johan Putra", "Hafid Nugraha", "Nabila Pertiwi", "Latif Saputra", "Ari Saputra", "Rio Saputra", "Tono Saputra", "Wandi Saputra", "Mahendra Putra", "Ilham Pratama", "Putri Dewi", "Adi Lestari", "Rangga Maulana", "Bayu Hidayat", "Fani Puspita", "Taufik", "Bagus Saputra", "Novi Puspita", "Rahmat Hidayatullah Putra", "Prayitno Saputra", "Adi Ramadhan", "Bayu Wijaya", "Gilang Nugraha", "Rangga Prasetyo", "Putra Purnama", "Wulan Pertiwi", "Adi Wijaya Ramadhan", "Budi", "Rian Pratama", "Samsul Nugroho", "Wahyu Saputra", "Teguh Prasetyo", "Fikri Nugraha", "Rizki Pratama"
    ];

    document.addEventListener('DOMContentLoaded', () => {
        // Init Content
        renderTestimonials();
        renderPaymentMethods();
        renderKelengkapan();
        addOrderItem();
        document.getElementById('add-order-btn').addEventListener('click', addOrderItem);
        document.getElementById('submit-btn').addEventListener('click', handleFormSubmit);
        
        setTimeout(showNextNotification, 5000);
    });

    function renderTestimonials() {
        const track = document.getElementById('testimonial-track');
        const imagesHTML = testimonialImages.map((src, i) => 
            `<img src="${src}" class="h-48 w-auto rounded-lg shadow-md hover:scale-105 transition-transform cursor-pointer" onclick="openImageModal(event, ${i})" loading="lazy">`
        ).join('');
        track.innerHTML = imagesHTML + imagesHTML; // Duplicate for infinite scroll
    }
    
    function renderKelengkapan() {
        const list = document.getElementById('kelengkapan-list');
        list.innerHTML = kelengkapanPaket.map(item => `
            <li class="flex items-start gap-2">
                <i class="fas fa-check-circle text-green-500 mt-0.5 text-xs"></i>
                <span>${item}</span>
            </li>
        `).join('');
    }

    function renderPaymentMethods() {
        const container = document.getElementById('payment-method-grid');
        let html = '';
        Object.entries(paymentAccounts).forEach(([key, acc], i) => {
            html += `
                <label class="cursor-pointer group relative">
                    <input type="radio" name="payment-method" value="${key}" class="peer sr-only radio-card-input" ${i===0?'checked':''}>
                    <div class="radio-card p-3 rounded-xl border border-slate-200 bg-white hover:border-brand-300 transition-all h-full flex flex-col items-center justify-center gap-2 group-hover:shadow-md">
                        <img src="${acc.logo}" class="h-6 object-contain" alt="${acc.displayName}">
                        <span class="text-xs font-medium text-slate-600">${acc.displayName}</span>
                        <div class="check-icon absolute top-2 right-2 text-brand-600 opacity-0 transform scale-50 transition-all duration-200"><i class="fas fa-check-circle"></i></div>
                    </div>
                </label>
            `;
        });
        container.innerHTML = html;
    }

    function addOrderItem() {
        const tpl = document.getElementById('order-item-template').content.cloneNode(true);
        const card = tpl.querySelector('.order-item-card');
        const id = `item-${orderItemIdCounter++}`;
        card.dataset.id = id;

        // Init Jenjang
        const jenjangSel = card.querySelector('.jenjang-select');
        Object.keys(educationalData).forEach(j => {
            jenjangSel.add(new Option(j, j));
        });

        // Event Listeners
        jenjangSel.addEventListener('change', handleJenjangChange);
        card.querySelector('.jurusan-select').addEventListener('change', handleJurusanChange);
        card.querySelector('.kelas-select').addEventListener('change', handleKelasChange);
        card.querySelector('.mapel-select').addEventListener('change', handleMapelChange);
        card.querySelector('.remove-order-item-btn').addEventListener('click', (e) => {
            e.currentTarget.closest('.order-item-card').remove();
            updateCart();
        });

        document.getElementById('order-items-container').appendChild(card);
        updateCart();
    }

    function handleJenjangChange(e) {
        const card = e.target.closest('.order-item-card');
        const jenjang = e.target.value;
        const jurusanGroup = card.querySelector('.jurusan-group');
        const jurusanSel = card.querySelector('.jurusan-select');
        const kelasSel = card.querySelector('.kelas-select');
        const mapelSel = card.querySelector('.mapel-select');
        const priceBox = card.querySelector('.price-preview-box');

        // Reset
        jurusanGroup.classList.add('hidden');
        jurusanSel.innerHTML = '<option value="">-- Pilih Jurusan --</option>'; jurusanSel.disabled = true;
        kelasSel.innerHTML = '<option value="">-- Pilih --</option>'; kelasSel.disabled = true;
        mapelSel.innerHTML = '<option value="">-- Pilih --</option>'; mapelSel.disabled = true;
        priceBox.classList.add('hidden');

        if (jenjang === 'SMK/MAK') {
            jurusanGroup.classList.remove('hidden');
            jurusanSel.disabled = false;
            Object.keys(educationalData[jenjang]).forEach(j => jurusanSel.add(new Option(j, j)));
        } else if (jenjang && educationalData[jenjang]) {
            kelasSel.disabled = false;
            Object.keys(educationalData[jenjang]).forEach(k => kelasSel.add(new Option(k, k)));
        }
        updateCart();
    }

    function handleJurusanChange(e) {
        const card = e.target.closest('.order-item-card');
        const jenjang = card.querySelector('.jenjang-select').value;
        const jurusan = e.target.value;
        const kelasSel = card.querySelector('.kelas-select');
        const mapelSel = card.querySelector('.mapel-select');

        kelasSel.innerHTML = '<option value="">-- Pilih --</option>';
        mapelSel.innerHTML = '<option value="">-- Pilih --</option>'; mapelSel.disabled = true;

        if (jenjang === 'SMK/MAK' && jurusan) {
            kelasSel.disabled = false;
            Object.keys(educationalData[jenjang][jurusan]).forEach(k => kelasSel.add(new Option(k, k)));
        }
        updateCart();
    }

    function handleKelasChange(e) {
        const card = e.target.closest('.order-item-card');
        const jenjang = card.querySelector('.jenjang-select').value;
        const jurusan = card.querySelector('.jurusan-select').value;
        const kelas = e.target.value;
        const mapelSel = card.querySelector('.mapel-select');
        const priceBox = card.querySelector('.price-preview-box');

        mapelSel.innerHTML = '<option value="">-- Pilih Mata Pelajaran --</option>'; mapelSel.disabled = true;
        priceBox.classList.add('hidden');

        let mapelList = [];
        let groupLabel = '';

        if (jenjang === 'SMK/MAK' && jurusan && kelas) {
            // Agama
            const grpAgama = document.createElement('optgroup'); grpAgama.label = "Agama";
            mapelAgama.forEach(m => grpAgama.appendChild(new Option(m, m)));
            mapelSel.appendChild(grpAgama);

            // Umum
            const grpUmum = document.createElement('optgroup'); grpUmum.label = "Umum";
            const mapelsClass = educationalData[jenjang][jurusan][kelas] || [];
            mapelSMKUmum.forEach(m => { if(mapelsClass.includes(m)) grpUmum.appendChild(new Option(m, m)); });
            mapelSel.appendChild(grpUmum);

            // Kejuruan
            const grpKejuruan = document.createElement('optgroup'); grpKejuruan.label = "Kejuruan";
            let allKejuruan = [];
            Object.values(educationalData[jenjang][jurusan]).forEach(cMapels => {
                cMapels.forEach(m => { if(!mapelSMKUmum.includes(m)) allKejuruan.push(m); });
            });
            [...new Set(allKejuruan)].sort().forEach(m => grpKejuruan.appendChild(new Option(m, m)));
            mapelSel.appendChild(grpKejuruan);
            
            mapelSel.disabled = false;
        } else if (jenjang && kelas) {
            const grpAgama = document.createElement('optgroup'); grpAgama.label = "Agama";
            mapelAgama.forEach(m => grpAgama.appendChild(new Option(m, m)));
            mapelSel.appendChild(grpAgama);

            const grpUmum = document.createElement('optgroup'); grpUmum.label = "Umum";
            (educationalData[jenjang][kelas]||[]).forEach(m => grpUmum.appendChild(new Option(m, m)));
            mapelSel.appendChild(grpUmum);
            
            mapelSel.disabled = false;
            
            // Show price for non-SMK immediately
             const price = pricing[jenjang];
             card.querySelector('.price-value').textContent = formatCurrency(price);
             priceBox.classList.remove('hidden');
        }
        updateCart();
    }

    function handleMapelChange(e) {
        const card = e.target.closest('.order-item-card');
        const jenjang = card.querySelector('.jenjang-select').value;
        const mapel = e.target.value;
        const priceBox = card.querySelector('.price-preview-box');

        if (jenjang === 'SMK/MAK' && mapel) {
            const isUmum = mapelSMKUmum.includes(mapel) || mapelAgama.includes(mapel);
            const price = isUmum ? pricing['SMK/MAK'].umum : pricing['SMK/MAK'].kejuruan;
            card.querySelector('.price-value').textContent = formatCurrency(price);
            priceBox.classList.remove('hidden');
        }
        updateCart();
    }

    function updateCart() {
        cart = [];
        const cards = document.querySelectorAll('.order-item-card');
        cards.forEach(c => {
            const jenjang = c.querySelector('.jenjang-select').value;
            const jurusan = c.querySelector('.jurusan-select').value;
            const kelas = c.querySelector('.kelas-select').value;
            const mapel = c.querySelector('.mapel-select').value;
            if (jenjang && kelas && mapel) {
                cart.push({ id: c.dataset.id, jenjang, jurusan, kelas, mapel });
            }
        });
        updateOrderSummary();
    }

    function updateOrderSummary() {
        const container = document.getElementById('order-summary-container');
        if (cart.length === 0) {
            container.innerHTML = '<div class="text-center text-slate-500 text-sm">Belum ada paket yang dipilih.</div>';
            return;
        }

        let subtotal = 0;
        let html = '<h3 class="font-bold text-slate-800 mb-3 text-sm border-b border-slate-200 pb-2">Rincian Pesanan</h3><div class="space-y-2 text-sm">';
        
        cart.forEach(item => {
            let price = 0;
            if (item.jenjang === 'SMK/MAK') {
                const isUmum = mapelSMKUmum.includes(item.mapel) || mapelAgama.includes(item.mapel);
                price = isUmum ? pricing['SMK/MAK'].umum : pricing['SMK/MAK'].kejuruan;
            } else {
                price = pricing[item.jenjang];
            }
            subtotal += price;
            html += `
                <div class="flex justify-between items-start">
                    <div>
                        <div class="font-medium text-slate-700">${item.jenjang} - ${item.kelas}</div>
                        <div class="text-xs text-slate-500">${item.mapel}</div>
                    </div>
                    <div class="font-semibold text-slate-700">${formatCurrency(price)}</div>
                </div>
            `;
        });
        
        const total = subtotal + uniqueCode;
        html += `</div>
            <div class="mt-3 pt-2 border-t border-slate-200 flex justify-between items-center text-xs text-slate-500">
                <span>Kode Unik</span>
                <span>${formatCurrency(uniqueCode)}</span>
            </div>
            <div class="mt-2 pt-2 border-t border-slate-200 flex justify-between items-center font-bold text-lg text-brand-600">
                <span>Total</span>
                <span>${formatCurrency(total)}</span>
            </div>`;
        
        container.innerHTML = html;
    }

    // --- FORM SUBMISSION ---
    async function handleFormSubmit() {
        if (cart.length === 0) { showInfoModal('Oops', 'Pilih minimal satu paket belajar.'); return; }
        
        const form = document.getElementById('mainOrderForm');
        const formData = new FormData(form);
        const nama = formData.get('nama').trim();
        const whatsapp = formData.get('whatsapp').trim();
        const email = formData.get('email').trim();
        const paymentMethod = formData.get('payment-method');

        if (!nama || !whatsapp || !email) { showInfoModal('Data Kurang', 'Lengkapi Nama, WhatsApp, dan Email.'); return; }
        
        const phoneCheck = validatePhoneNumber(whatsapp);
        if (!phoneCheck.isValid) { showInfoModal('Nomor WA Salah', phoneCheck.message); return; }

        const btn = document.getElementById('submit-btn');
        btn.disabled = true;
        btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Memproses...';

        // Calculate Total
        let subtotal = 0;
        const itemDetails = cart.map(item => {
            let price = 0;
            if (item.jenjang === 'SMK/MAK') {
                const isUmum = mapelSMKUmum.includes(item.mapel) || mapelAgama.includes(item.mapel);
                price = isUmum ? pricing['SMK/MAK'].umum : pricing['SMK/MAK'].kejuruan;
            } else {
                price = pricing[item.jenjang];
            }
            subtotal += price;
            return `- ${item.jenjang} ${item.kelas} (${item.mapel})`;
        }).join('\n');
        
        const total = subtotal + uniqueCode;
        const payAccount = paymentAccounts[paymentMethod];
        const now = new Date();
        const payId = `INV-${now.getFullYear()}${String(now.getMonth()+1).padStart(2,'0')}${String(now.getDate()).padStart(2,'0')}${String(total).slice(-3)}`;

        // Send to Google Sheet
        try {
            const scriptURL = 'https://script.google.com/macros/s/AKfycbySaAB2WT0D59UlLyZcXliWvNURCnHcRrqz5P8C2LCQbVdk0hn3Qkl1glGiLJSql_Wh/exec';
            await fetch(scriptURL, {
                method: 'POST', mode: 'no-cors', cache: 'no-cache',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    nama, whatsapp, email,
                    paket: itemDetails,
                    metodePembayaran: payAccount.displayName,
                    totalTransfer: formatCurrency(total),
                    idPembayaran: payId,
                    nomorRekening: payAccount.number,
                    sheetName: formData.get('sheetName')
                })
            });
            
            showPaymentPage(nama, whatsapp, email, total, payId, payAccount, itemDetails);

        } catch (e) {
            console.error(e);
            showInfoModal('Gagal', 'Terjadi kesalahan koneksi. Silakan coba lagi.');
            btn.disabled = false;
            btn.innerHTML = '<span class="relative z-10 flex items-center justify-center gap-2"><i class="fas fa-lock"></i> Bayar & Download Sekarang</span>';
        }
    }

    function showPaymentPage(nama, wa, email, total, payId, acc, details) {
        window.scrollTo(0,0);
        document.querySelector('main').classList.add('hidden');
        document.querySelector('header').classList.add('hidden');
        
        const overlay = document.getElementById('payment-overlay');
        const container = document.getElementById('payment-instruction-container');
        
        overlay.classList.remove('hidden');

        // QRIS Logic
        let qrisHtml = '';
        if (acc.type === 'qris') {
             qrisHtml = `<div class="bg-white p-4 rounded-xl border border-slate-200 shadow-sm mx-auto max-w-[280px] my-4"><div id="qrcode" class="flex justify-center"></div></div>`;
             setTimeout(() => {
                 try {
                     // Simple dynamic qris generation attempt (if failure fallback to static logic or error)
                     // Reusing original logic
                     const qrisStr = createDynamicQrisString(acc.number, { nominal: total });
                     QRCode.toCanvas(qrisStr, { width: 250, margin: 1 }, (err, canvas) => {
                         if(!err) {
                             canvas.style.width="100%"; canvas.style.height="auto";
                             document.getElementById('qrcode').appendChild(canvas);
                         }
                     });
                 } catch(e) { 
                     document.getElementById('qrcode').innerHTML = 'QR Code Error'; 
                 }
             }, 500);
        }

        const expiry = new Date(Date.now() + 24*60*60*1000);
        const expiryStr = expiry.toLocaleDateString('id-ID', {weekday:'long', day:'numeric', month:'long'}) + ' ' + expiry.toLocaleTimeString('id-ID', {hour:'2-digit', minute:'2-digit'});

        const waLink = `https://wa.me/6285602152097?text=${encodeURIComponent(`Halo, saya sudah transfer untuk pesanan ${payId} atas nama ${nama}.`)}`;

        container.innerHTML = `
            <div class="p-6 space-y-6">
                <div class="text-center">
                    <div class="w-12 h-12 bg-green-100 text-green-600 rounded-full flex items-center justify-center mx-auto mb-4 text-xl"><i class="fas fa-check"></i></div>
                    <h2 class="font-bold text-2xl text-slate-800">Selesaikan Pembayaran</h2>
                    <p class="text-slate-500 text-sm mt-1">Order ID: ${payId}</p>
                </div>

                <div class="bg-blue-50 border border-blue-100 rounded-xl p-5 text-center">
                    <p class="text-xs font-semibold text-blue-600 uppercase tracking-wide mb-2">Total Pembayaran</p>
                    <div class="flex justify-center items-center gap-2">
                        <span class="text-3xl font-extrabold text-slate-900">${formatCurrency(total)}</span>
                        <button onclick="copyToClipboard('${total}')" class="text-slate-400 hover:text-slate-600"><i class="far fa-copy"></i></button>
                    </div>
                </div>

                <div class="bg-white border border-slate-200 rounded-xl p-5 shadow-sm">
                    <div class="flex items-center justify-between mb-4">
                        <div>
                            <p class="text-sm text-slate-500">Bank / E-Wallet</p>
                            <p class="font-bold text-slate-800">${acc.displayName}</p>
                        </div>
                        <img src="${acc.logo}" class="h-8 object-contain">
                    </div>
                    ${acc.type !== 'qris' ? `
                    <div class="bg-slate-50 p-3 rounded-lg flex justify-between items-center">
                        <span class="font-mono font-bold text-lg text-slate-700">${acc.number}</span>
                        <button onclick="copyToClipboard('${acc.number}')" class="text-sm text-brand-600 font-medium">Salin</button>
                    </div>
                    <p class="text-xs text-slate-500 mt-2">A/N: ${acc.accountHolder}</p>
                    ` : qrisHtml}
                </div>

                <div class="text-center space-y-4">
                    <p class="text-xs text-slate-400">Bayar sebelum ${expiryStr}</p>
                    <a href="${waLink}" target="_blank" class="block w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 rounded-xl transition-colors">
                        <i class="fab fa-whatsapp mr-2"></i> Konfirmasi Pembayaran
                    </a>
                </div>
            </div>
        `;
    }

    // --- QRIS GEN (Copied) ---
    function toCRC16(input) {
        let crc = 0xFFFF;
        for (let i = 0; i < input.length; i++) {
            crc ^= input.charCodeAt(i) << 8;
            for (let j = 0; j < 8; j++) {
                crc = crc & 0x8000 ? (crc << 1) ^ 0x1021 : crc << 1;
            }
        }
        return (crc & 0xFFFF).toString(16).toUpperCase().padStart(4, '0');
    }
    function createDynamicQrisString(qris, { nominal }) {
        let qrisModified = qris.slice(0, -4).replace("010211", "010212");
        const nominalStr = String(Math.round(nominal));
        const amountLength = nominalStr.length < 10 ? "0" + nominalStr.length : nominalStr.length.toString();
        const amountPart = "54" + amountLength + nominalStr;
        let finalQris = qrisModified.replace("5802ID", amountPart + "5802ID");
        return finalQris + toCRC16(finalQris);
    }

    // --- HELPERS ---
    function showInfoModal(title, msg) {
        document.getElementById('modalTitle').textContent = title;
        document.getElementById('modalMessage').textContent = msg;
        document.getElementById('infoModal').classList.add('active');
    }
    window.closeInfoModal = () => document.getElementById('infoModal').classList.remove('active');
    
    window.openImageModal = (e, i) => {
        e.stopPropagation();
        const modal = document.getElementById('imageModal');
        const img = document.getElementById('modalImage');
        img.src = testimonialImages[i];
        img.dataset.index = i;
        modal.classList.add('active');
    };
    window.closeImageModal = () => document.getElementById('imageModal').classList.remove('active');
    window.showNextImage = (e) => {
        e.stopPropagation();
        const img = document.getElementById('modalImage');
        let idx = parseInt(img.dataset.index) + 1;
        if (idx >= testimonialImages.length) idx = 0;
        openImageModal(e, idx);
    };
    window.showPrevImage = (e) => {
        e.stopPropagation();
        const img = document.getElementById('modalImage');
        let idx = parseInt(img.dataset.index) - 1;
        if (idx < 0) idx = testimonialImages.length - 1;
        openImageModal(e, idx);
    };

    function copyToClipboard(text) {
        navigator.clipboard.writeText(text);
        showInfoModal('Disalin', 'Teks berhasil disalin ke clipboard.');
    }

    function showNextNotification() {
        const names = notificationNames;
        const name = names[Math.floor(Math.random() * names.length)];
        const toast = document.getElementById('notifToast');
        document.getElementById('notifText').textContent = `${name} baru saja memesan!`;
        
        toast.classList.remove('-translate-y-full', 'opacity-0');
        setTimeout(() => {
            toast.classList.add('-translate-y-full', 'opacity-0');
        }, 3000);
        setTimeout(showNextNotification, Math.random() * 10000 + 8000);
    }
    </script>
</body>
</html>
